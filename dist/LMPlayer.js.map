{"version":3,"sources":["webpack://LMPlayer/webpack/universalModuleDefinition","webpack://LMPlayer/webpack/bootstrap","webpack://LMPlayer/external \"React\"","webpack://LMPlayer/external \"ReactDOM\"","webpack://LMPlayer/external \"Hls\"","webpack://LMPlayer/external \"flvjs\"","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://LMPlayer/./src/event/index.js","webpack://LMPlayer/./src/util.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://LMPlayer/./src/context.js","webpack://LMPlayer/./src/iconfont.js","webpack://LMPlayer/./src/slider.js","webpack://LMPlayer/./src/contraller_bar/bar.js","webpack://LMPlayer/./src/event/eventName.js","webpack://LMPlayer/./src/contraller_bar/left_bar.js","webpack://LMPlayer/./src/contraller_bar/right_bar.js","webpack://LMPlayer/./src/contraller_bar/index.js","webpack://LMPlayer/./src/message.js","webpack://LMPlayer/./src/time_line.js","webpack://LMPlayer/./src/event/errorEvent.js","webpack://LMPlayer/./src/event/dragEvent.js","webpack://LMPlayer/./src/api.js","webpack://LMPlayer/./src/live_heart.js","webpack://LMPlayer/./src/player.js","webpack://LMPlayer/./src/history/time_line_history.js","webpack://LMPlayer/./src/history/play_end.js","webpack://LMPlayer/./src/event/contrallerEvent.js","webpack://LMPlayer/./src/history/index.js","webpack://LMPlayer/./src/index.js","webpack://LMPlayer/./src/createPlayer.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","_typeof2","obj","iterator","constructor","_typeof","_possibleConstructorReturn","self","ReferenceError","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","VideoEvent","video","this","events","playerEvents","eventName","handle","listener","push","type","addEventListener","index","findIndex","v","splice","removeEventListener","_len","arguments","data","Array","_key","forEach","apply","_this","keys","fn","createHlsPlayer","file","Hls","isSupported","player","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","createFlvPlayer","options","flvjs","createPlayer","url","isLive","enableWorker","enableStashBuffer","attachMediaElement","load","getVideoType","resultArr","exec","replace","isFullscreen","ele","document","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","map","computedBound","currentPosition","scale","lx","ly","eleRect","getBoundingClientRect","w","width","h","height","x","y","_objectWithoutProperties","source","excluded","sourceKeys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","videoContext","React","createContext","Provider","Consumer","videoDec","Component","ComponentWithVideoDec","_React$Component","_this$props","forwardRef","external_React_default","a","createElement","context","assign","ref","IconFont","_ref","_ref$className","className","concat","Slider","renderSliderTips","e","renderTips","_this$layoutDom$getBo","layoutDom","top","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","body","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","event","_this$layoutDom$getBo2","sliderDomRef","createRef","lineDom","dragDom","currentPercent","nextProps","ReactDOM","findDOMNode","current","querySelector","_this$layoutDom$getBo3","dx","_this$state","_this$props$available","availablePercent","_this$props$className","style","children","draggable","left","slider_Tips","visibel","Tips","_this2","appendChild","removeChild","_this$props2","_this$props2$classNam","createPortal","Bar","_ref$visibel","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","LeftBar","seek","historyEnd","historyPlayEnd","console","log","updateRender","forceUpdate","changePlayStatus","api","reloadHistory","paused","play","pause","mutedChange","muted","unmute","mute","volumechange","openSliderVolume","closeSliderVolume","onChangeVolume","volume","_this$props3","setVolume","parseFloat","toFixed","reload","isHistory","EventName","off","_this$props4","playerProps","volumeType","onClick","title","onMouseOver","onMouseOut","src_slider","precent","Math","round","RightBar","update","fullscreen","playContainer","cancelFullScreen","requestFullScreen","setScale","position","getPosition","getScale","setPosition","snapshot","base64","actions","isfull","ContrallerBar","hideContraller","hideBar","showContraller","left_bar","right_bar","VideoMessage","message","status","errorReload","timer","loading","reloadFail","reloadSuccess","openLoading","closeLoading","TineLine","getDuration","duration","getCurrentTime","currentTime","buffered","getSecondsLoaded","getBuffered","changePlayTime","seekTo","seekendPlay","renderTimeLineTips","time","second_time","ceil","second","min","floor","hour","timeStamp","fastForward","backWind","playPercent","bufferedPercent","ErrorEvent","errorTimer","clearError","warn","emit","errorHandle","_console","changePlayIndex","playIndex","args","unload","error","reconnectTimer","setTimeout","flvPlayer","hlsPlayer","clearTimeout","DragEvent","openDrag","start","pageY","end","transformChange","Api","flv","hls","element","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","catch","removeAttribute","destroy","seconds","noEmit","getBufferedTime","stopLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","rate","playbackRate","_this$player","seekable","Infinity","undefined","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","num","isRest","transition","__setTransform","isAnimate","transform","setPlaybackRate","__player","LiveHeart","isPlayError","clearHandle","updateProgress","progressTime","Date","now","focusSeekAction","heartAction","setInterval","timeNow","clearInterval","LMPlayer","initPlayer","src","renderVideoTools","Fragment","contraller_bar","src_message","src_time_line","errorEvent","dragEvent","live_heart","getPlayUrl","getPlayerApiContext","getApi","getProvider","playerType","playContainerRef","playsinline","setAttribute","autoPlay","onInitPlayer","poster","providerValue","controls","isEnd","historyList","fragments","date","timetemp","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","dateFormat","beginDate","getTime","computedLineList","disabled","size","begin","lineList","currentLine","filter","currentIndexTime","reduce","currentSizeLine","i2","currentIndexSize","PlayEnd","endedHandle","ContrallerEvent","HistoryPlayer","checkFirstFile","defaultTime","computedIndexFormTime","isFrist","updateChunk","historyApi","seekTime","time_line_history","contrallerEvent","play_end","Player","createHistoryPlayer","_ref2","container","render","src_history","unmountComponentAtNode","src_player"],"mappings":"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","file":"LMPlayer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"ReactDOM\"), require(\"Hls\"), require(\"flvjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"LMPlayer\", [\"React\", \"ReactDOM\", \"Hls\", \"flvjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LMPlayer\"] = factory(require(\"React\"), require(\"ReactDOM\"), require(\"Hls\"), require(\"flvjs\"));\n\telse\n\t\troot[\"LMPlayer\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"Hls\"], root[\"flvjs\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","class VideoEvent {\r\n  constructor(video) {\r\n    this.video = video;\r\n    this.events = {};\r\n    this.playerEvents = {};\r\n  }\r\n  on(eventName, handle) {\r\n    this.events && this.events[eventName] ? this.events[eventName].listener.push(handle) : (this.events[eventName] = { type: eventName, listener: [handle] });\r\n  }\r\n  addEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle]);\r\n      this.video.addEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  removeEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      if (!this.playerEvents[eventName]) {\r\n        return;\r\n      }\r\n      let index = this.playerEvents[eventName].findIndex(v => v === handle);\r\n      index > -1 && this.playerEvents[eventName].splice(index, 1);\r\n      this.video.removeEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  emit(eventName, ...data) {\r\n    if (!this.events || !this.events[eventName]) {\r\n      return;\r\n    }\r\n    this.events[eventName].listener.forEach(v => {\r\n      v(...data);\r\n    });\r\n  }\r\n  off(eventName, handle) {\r\n    if (!this.events || !this.events.eventName) {\r\n      return;\r\n    }\r\n    let index = this.events[eventName].listener.findIndex(v => v === handle);\r\n    index > -1 && this.events[eventName].listener.splice(index, 1);\r\n  }\r\n  destroy() {\r\n    Object.keys(this.playerEvents).forEach(key => {\r\n      this.playerEvents[key].forEach(fn => {\r\n        this.removeEventListener(key, fn);\r\n      });\r\n    });\r\n    this.playerEvents = null;\r\n    this.events = null;\r\n  }\r\n}\r\n\r\nexport default VideoEvent;\r\n","import flvjs from \"flv.js\";\r\nimport Hls from \"hls.js\";\r\n\r\n/**\r\n * 创建HLS对象\r\n * @param {*} video \r\n * @param {*} file \r\n */\r\nexport function createHlsPlayer(video, file) {\r\n  if (Hls.isSupported()) {\r\n    const player = new Hls();\r\n    player.attachMedia(video);\r\n    player.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n      player.loadSource(file);\r\n      player.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        // console.log(player);\r\n      });\r\n    });\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * 创建FLV对象\r\n * @param {*} video \r\n * @param {*} options \r\n */\r\nexport function createFlvPlayer(video, options) {\r\n  if (flvjs.isSupported()) {\r\n    const player = flvjs.createPlayer(\r\n      {\r\n        type: \"flv\",\r\n        url: options.file,\r\n        isLive: !!options.isLive\r\n      },\r\n      {\r\n        enableWorker: false,\r\n        enableStashBuffer: false,\r\n        isLive: !!options.isLive\r\n      }\r\n    );\r\n    player.attachMediaElement(video);\r\n    player.load();\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取播放文件类型\r\n * @param {*} url \r\n */\r\nexport function getVideoType(url) {\r\n  const reg = /([^\\.\\/\\\\]+)\\.(([a-z]|[0-9])+(\\?\\S+)?)$/i;\r\n  const resultArr = reg.exec(url);\r\n  if (resultArr) {\r\n    return resultArr[2].replace(resultArr[4], \"\");\r\n  }\r\n}\r\n\r\n/**\r\n * 播放时间转字符串\r\n * @param {*} second_time \r\n */\r\nexport function timeStamp(second_time) {\r\n  let time = Math.ceil(second_time);\r\n  if (time > 60) {\r\n    let second = Math.ceil(second_time % 60);\r\n    let min = Math.floor(second_time / 60);\r\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    if (min > 60) {\r\n      min = Math.ceil((second_time / 60) % 60);\r\n      let hour = Math.floor(second_time / 60 / 60);\r\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    } else {\r\n      time = `00:${time}`;\r\n    }\r\n  } else {\r\n    time = `00:00:${time < 10 ? `0${time}` : time}`;\r\n  }\r\n\r\n  return time;\r\n}\r\n\r\n/**\r\n * 日期格式化\r\n * @param {*} timetemp \r\n */\r\nexport function dateFormat(timetemp) {\r\n  const date = new Date(timetemp);\r\n  let YYYY = date.getFullYear();\r\n  let DD = date.getDate();\r\n  let MM = date.getMonth() + 1;\r\n  let hh = date.getHours();\r\n  let mm = date.getMinutes();\r\n  let ss = date.getSeconds();\r\n  return `${YYYY}.${MM > 10 ? MM : \"0\" + MM}.${DD > 10 ? DD : \"0\" + DD} ${hh > 10 ? hh : \"0\" + hh}.${mm > 10 ? mm : \"0\" + mm}.${ss > 10 ? ss : \"0\" + ss}`;\r\n}\r\n\r\n/**\r\n * 全屏\r\n * @param {*} element \r\n */\r\nexport function fullscreen(element) {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen();\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen();\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen();\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * exitFullscreen 退出全屏\r\n * @param  {Objct} element 选择器\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * 判读是否支持全屏\r\n */\r\nexport function fullscreenEnabled() {\r\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled;\r\n}\r\n\r\n/**\r\n * [isFullscreen 判断浏览器是否全屏]\r\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\r\n */\r\nexport function isFullscreen(ele) {\r\n  if (!ele) {\r\n    return false;\r\n  }\r\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false;\r\n}\r\n// 添加 / 移除 全屏事件监听\r\nexport function fullScreenListener(isAdd, fullscreenchange) {\r\n  const funcName = isAdd ? \"addEventListener\" : \"removeEventListener\";\r\n  const fullScreenEvents = [\"fullscreenchange\", \"mozfullscreenchange\", \"webkitfullscreenchange\", \"msfullscreenchange\"];\r\n  fullScreenEvents.map(v => document[funcName](v, fullscreenchange));\r\n}\r\n\r\n/**\r\n * 计算视频拖拽边界\r\n * @param {*} ele \r\n * @param {*} currentPosition \r\n * @param {*} scale \r\n */\r\nexport function computedBound(ele, currentPosition, scale) {\r\n  const data = currentPosition;\r\n  const eleRect = ele.getBoundingClientRect();\r\n  const w = eleRect.width;\r\n  const h = eleRect.height;\r\n  let lx = 0,\r\n    ly = 0;\r\n  if (scale === 1) {\r\n    return [0, 0];\r\n  }\r\n  lx = (w * (scale - 1)) / 2 / scale;\r\n  ly = (h * (scale - 1)) / 2 / scale;\r\n  let x = 0,\r\n    y = 0;\r\n  if (data[0] >= 0 && data[0] > lx) {\r\n    x = lx;\r\n  }\r\n  if (data[0] >= 0 && data[0] < lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[0] < 0 && data[0] < -lx) {\r\n    x = -lx;\r\n  }\r\n  if (data[0] < 0 && data[0] > -lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[1] >= 0 && data[1] > ly) {\r\n    y = ly;\r\n  }\r\n  if (data[1] >= 0 && data[1] < ly) {\r\n    y = data[1];\r\n  }\r\n\r\n  if (data[1] < 0 && data[1] < -ly) {\r\n    y = -ly;\r\n  }\r\n  if (data[1] < 0 && data[1] > -ly) {\r\n    y = data[1];\r\n  }\r\n  if (x !== data[0] || y !== data[1]) {\r\n    return [x, y];\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from \"react\";\r\n\r\nconst videoContext = React.createContext(null);\r\n\r\nexport const Provider = videoContext.Provider;\r\nexport const Consumer = videoContext.Consumer;\r\n\r\nexport function videoDec(Component) {\r\n  class ComponentWithVideoDec extends React.Component {\r\n    render() {\r\n      const { forwardRef, ...props } = this.props;\r\n      return <Consumer>{context => <Component {...props} {...context} ref={forwardRef} />}</Consumer>;\r\n    }\r\n  }\r\n  return React.forwardRef((props, ref) => <ComponentWithVideoDec {...props} forwardRef={ref} />);\r\n}\r\n","import React from \"react\";\r\nimport \"./style/iconfont.less\";\r\nexport default function IconFont({ type, className = \"\", ...props }) {\r\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />;\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/slider.less\";\r\n\r\nclass Slider extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.sliderDomRef = React.createRef();\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = false;\r\n    this.state = {\r\n      value: this.props.currentPercent || 0,\r\n      tempValue: 0,\r\n      showTips: false,\r\n      tipsX: 0,\r\n      tipsY: 0\r\n    };\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!this.dragFlag) {\r\n      this.setState({ value: nextProps.currentPercent || 0 });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.layoutDom = ReactDOM.findDOMNode(this.sliderDomRef.current);\r\n    this.dragDom = this.layoutDom.querySelector(\".drag-change-icon\");\r\n    this.lineDom = this.layoutDom.querySelector(\".slider-content\");\r\n\r\n    this.layoutDom.addEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.addEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.addEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.addEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.addEventListener(\"mousedown\", this.startDrag, false);\r\n  }\r\n  componentWillUnmount() {\r\n    this.layoutDom.removeEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.removeEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.removeEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.removeEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.removeEventListener(\"mousedown\", this.startDrag, false);\r\n\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n\r\n    this.sliderDomRef = null;\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = null;\r\n  }\r\n  renderSliderTips = e => {\r\n    const { renderTips } = this.props;\r\n    if (!renderTips) {\r\n      return;\r\n    }\r\n    const { x, width, top } = this.layoutDom.getBoundingClientRect();\r\n    const tipsX = e.pageX;\r\n    let percent = (e.pageX - x) / width;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent });\r\n  };\r\n  hideSliderTips = () => {\r\n    this.setState({ showTips: false });\r\n  };\r\n  cancelPropagation = e => {\r\n    e.stopPropagation();\r\n  };\r\n  startDrag = e => {\r\n    e.stopPropagation();\r\n    this.dragFlag = true;\r\n    document.body.addEventListener(\"mousemove\", this.moveChange);\r\n    document.body.addEventListener(\"mouseup\", this.stopDrag);\r\n  };\r\n  moveChange = e => {\r\n    e.stopPropagation();\r\n    const percent = this.computedPositionForEvent(e);\r\n    this.setState({ value: percent });\r\n  };\r\n  stopDrag = e => {\r\n    e.stopPropagation();\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n    this.dragFlag = false;\r\n    let percent = this.state.value / 100;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  computedPositionForEvent(e) {\r\n    const { x, width } = this.layoutDom.getBoundingClientRect();\r\n    const { pageX } = e;\r\n    let dx = pageX - x;\r\n    if (dx > width) {\r\n      dx = width;\r\n    }\r\n    if (dx < 0) {\r\n      dx = 0;\r\n    }\r\n    return (dx / width) * 100;\r\n  }\r\n  changeCurrentValue = event => {\r\n    event.stopPropagation();\r\n    const { width, x } = this.layoutDom.getBoundingClientRect();\r\n    let percent = (event.pageX - x) / width;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  render() {\r\n    const { value, showTips, tipsX, tipsY } = this.state;\r\n    const { availablePercent = 0, className = \"\" } = this.props;\r\n    return (\r\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\r\n        <div className=\"slider-content\">\r\n          <div className=\"slider-max-line\" />\r\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\r\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\r\n          {this.props.children}\r\n        </div>\r\n        <div className=\"slider-other-content\">\r\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\r\n        </div>\r\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }}>\r\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\r\n        </Tips>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Tips extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.ele = document.createElement(\"div\");\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.ele);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.ele);\r\n    this.ele = null;\r\n  }\r\n  render() {\r\n    const { visibel, children, style, className = \"\" } = this.props;\r\n    return ReactDOM.createPortal(\r\n      visibel ? (\r\n        <div className={className} style={style}>\r\n          {children}\r\n        </div>\r\n      ) : null,\r\n      this.ele\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nexport default function Bar({ visibel = true, className, children, ...props }) {\r\n  if (visibel === false) {\r\n    return null;\r\n  }\r\n  return (\r\n    <span className={`contraller-bar-item ${className}`} {...props}>\r\n      {children}\r\n    </span>\r\n  );\r\n}\r\n","export default {\r\n  RELOAD: \"reload\", //手动视频重载\r\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\r\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\r\n  ERROR: \"error\", //视频出错\r\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\r\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\r\n  SEEK: \"seek\", //跳跃播放时间\r\n  TRANSFORM: \"transform\", //视频容器缩放\r\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\r\n  HIDE_CONTRALLER:\"hideContraller\",\r\n  SHOW_CONTRALLER:\"showContraller\",\r\n};\r\n","import React from \"react\";\r\nimport IconFont from \"../iconfont\";\r\nimport { videoDec } from \"../context\";\r\nimport Slider from \"../slider\";\r\nimport Bar from \"./bar\";\r\nimport EventName from \"../event/eventName\";\r\n\r\n@videoDec\r\nclass LeftBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openSliderVolume: false\r\n    };\r\n    this.historyEnd = false;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"play\", this.updateRender);\r\n    event.addEventListener(\"pause\", this.updateRender);\r\n    event.addEventListener(\"volumechange\", this.volumechange);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.SEEK, this.seek);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"play\", this.updateRender);\r\n    event.removeEventListener(\"pause\", this.updateRender);\r\n    event.removeEventListener(\"volumechange\", this.volumechange);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.SEEK, this.seek);\r\n  }\r\n  seek = () => {\r\n    this.historyEnd = false;\r\n  }\r\n  historyPlayEnd = () => {\r\n    console.log(1111)\r\n    this.historyEnd = true;\r\n  };\r\n  updateRender = () => {\r\n    this.forceUpdate();\r\n  };\r\n  changePlayStatus = () => {\r\n    const { api, video } = this.props;\r\n    if(this.historyEnd){\r\n      this.props.reloadHistory();\r\n    }else{\r\n      video.paused ? api.play() : api.pause();\r\n    }\r\n    \r\n  };\r\n  mutedChange = () => {\r\n    const { api, video } = this.props;\r\n    video.muted ? api.unmute() : api.mute();\r\n  };\r\n  volumechange = () => {\r\n    this.forceUpdate();\r\n  };\r\n  openSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: true\r\n    });\r\n  };\r\n  closeSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: false\r\n    });\r\n  };\r\n  onChangeVolume = volume => {\r\n    const { api, video } = this.props;\r\n    api.setVolume(parseFloat(volume.toFixed(1)));\r\n    if (volume > 0 && video.muted) {\r\n      api.unmute();\r\n    }\r\n  };\r\n  reload = () => {\r\n    if (this.props.isHistory) {\r\n      this.props.reloadHistory();\r\n    } else {\r\n      this.props.api.reload();\r\n    }\r\n  };\r\n  render() {\r\n    const { openSliderVolume } = this.state;\r\n    const { video, playerProps } = this.props;\r\n    const volumeType = video.volume === 1 ? \"lm-player-volume-max\" : \"lm-player-volume-normal-fuben\";\r\n    return (\r\n      <div className=\"contraller-left-bar\">\r\n        <Bar visibel={!playerProps.isLive}>\r\n          <IconFont onClick={this.changePlayStatus} type={video.paused ? \"lm-player-Play_Main\" : \"lm-player-Pause_Main\"} title={video.paused ? \"播放\" : \"暂停\"} />\r\n        </Bar>\r\n        <Bar className={`contraller-bar-volume ${openSliderVolume ? \"contraller-bar-hover-volume\" : \"\"}`} onMouseOver={this.openSliderVolume} onMouseOut={this.closeSliderVolume}>\r\n          <IconFont onClick={this.mutedChange} type={video.muted ? \"lm-player-volume-close\" : volumeType} title=\"音量\" />\r\n          <div className=\"volume-slider-layout\">\r\n            <Slider\r\n              className=\"volume-slider\"\r\n              currentPercent={video.muted ? 0 : video.volume * 100}\r\n              onChange={this.onChangeVolume}\r\n              renderTips={precent => <span>{Math.round(precent * 100)}%</span>}\r\n            />\r\n          </div>\r\n        </Bar>\r\n        <Bar>\r\n          <IconFont onClick={this.reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\r\n        </Bar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftBar;\r\n","import React from 'react'\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport { isFullscreen, fullScreenListener, computedBound } from '../util'\r\n\r\n@videoDec\r\nclass RightBar extends React.Component {\r\n    componentDidMount() {\r\n        fullScreenListener(true, this.update)\r\n    }\r\n    componentWillUnmount() {\r\n        fullScreenListener(false, this.update)\r\n    }\r\n    update = () => {\r\n        this.forceUpdate()\r\n    }\r\n    fullscreen = () => {\r\n        const { api, playContainer } = this.props\r\n        if (!isFullscreen(playContainer)) {\r\n            api.requestFullScreen()\r\n        } else {\r\n            api.cancelFullScreen()\r\n        }\r\n        this.forceUpdate()\r\n    }\r\n    setScale = (...args) => {\r\n        const { api, playContainer } = this.props\r\n        const dragDom = playContainer.querySelector('.player-mask-layout')\r\n        api.setScale(...args)\r\n        let position = computedBound(dragDom, api.getPosition(), api.getScale())\r\n        position && api.setPosition(position, true)\r\n    }\r\n    snapshot = () => {\r\n        const { api, playerProps } = this.props\r\n        const base64 = api.snapshot()\r\n        if (playerProps.actions && playerProps.actions.snapshot) {\r\n            playerProps.actions.snapshot(base64)\r\n        }\r\n    }\r\n    render() {\r\n        const { playContainer } = this.props\r\n        const isfull = isFullscreen(playContainer)\r\n        return <div className=\"contraller-right-bar\">\r\n            <span className=\"contraller-bar-item\">\r\n                <IconFont title=\"缩小\" onClick={() => this.setScale(-0.2)} type={\"lm-player-ZoomOut_Main\"} />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n                <IconFont title=\"复位\" onClick={() => this.setScale(1, true)} type={\"lm-player-ZoomDefault_Main\"} />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n                <IconFont title=\"放大\" onClick={() => this.setScale(0.2)} type={\"lm-player-ZoomIn_Main\"} />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n                <IconFont title=\"截图\" onClick={this.snapshot} type=\"lm-player-SearchBox\" />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n                <IconFont title={isfull ? \"窗口\" : \"全屏\"} onClick={this.fullscreen} type={isfull ? \"lm-player-ExitFull_Main\" : \"lm-player-Full_Main\"} />\r\n            </span>\r\n        </div>\r\n    }\r\n}\r\nexport default RightBar","import React from \"react\";\r\nimport LeftBar from \"./left_bar\";\r\nimport RightBar from \"./right_bar\";\r\nimport EventName from \"../event/eventName\";\r\nimport {videoDec} from '../context'\r\nimport \"../style/bar.less\";\r\n\r\n@videoDec\r\nclass ContrallerBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={`contraller-bar-layout ${this.state.hideBar ? \"hide-contraller-bar\" : \"\"}`}>\r\n        <LeftBar />\r\n        <RightBar />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContrallerBar;\r\n","import React from \"react\";\r\nimport IconFont from \"./iconfont\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\n\r\nimport \"./style/message.less\";\r\n\r\n@videoDec\r\nclass VideoMessage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n      status: null\r\n    };\r\n    this.message = null;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadstart\", this.openLoading);\r\n    event.addEventListener(\"waiting\", this.openLoading);\r\n    event.addEventListener(\"seeking\", this.openLoading);\r\n    event.addEventListener(\"loadeddata\", this.closeLoading);\r\n    event.addEventListener(\"canplay\", this.closeLoading);\r\n    event.on(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.on(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.on(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadstart\", this.openLoading);\r\n    event.removeEventListener(\"waiting\", this.openLoading);\r\n    event.removeEventListener(\"seeking\", this.openLoading);\r\n    event.removeEventListener(\"loadeddata\", this.closeLoading);\r\n    event.removeEventListener(\"canplay\", this.closeLoading);\r\n    event.off(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.off(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.off(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n  }\r\n  reload = () => {\r\n    this.message = null\r\n    this.setState({ status: \"reload\" });\r\n  };\r\n  errorReload = timer => {\r\n    this.message = <div>视频加载错误，正在进行重连第{timer}重连</div>;\r\n    this.setState({ status: \"reload\", loading: true });\r\n  };\r\n  reloadFail = () => {\r\n    this.message = <div>视频错误</div>;\r\n    this.setState({ status: \"fail\" });\r\n  };\r\n  reloadSuccess = () => {\r\n    this.message = null;\r\n    this.setState({ status: null });\r\n  };\r\n  openLoading = () => {\r\n    this.setState({ loading: true });\r\n  };\r\n  closeLoading = () => {\r\n    this.setState({ loading: false });\r\n  };\r\n  historyPlayEnd = () => {\r\n    this.message = null;\r\n    this.setState({ status: null, loading: false });\r\n    this.props.api.pause();\r\n  };\r\n  render() {\r\n    const { loading, status } = this.state;\r\n    return (\r\n      <div className={`lm-player-message-mask ${loading || status === \"fail\" ? \"lm-player-mask-loading-animation\" : \"\"}`}>\r\n        <IconFont\r\n          type={status === \"fail\" ? \"lm-player-YesorNo_No_Dark\" : \"lm-player-Loading\"}\r\n          className={`${loading && status !== \"fail\" ? \"lm-player-loading-animation\" : status === \"fail\" ? \"lm-player-loadfail\" : \"\"} lm-player-loading-icon`}\r\n        />\r\n        <span className=\"lm-player-message\">{this.message}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoMessage;\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport IconFont from \"./iconfont\";\r\nimport Slider from \"./slider\";\r\nimport { timeStamp } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nimport \"./style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 0,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n  changePlayTime = percent => {\r\n    const { api } = this.props;\r\n    const currentTime = percent * this.state.duration;\r\n    api.pause();\r\n    this.setState({ currentTime });\r\n    api.seekTo(currentTime);\r\n  };\r\n  seekendPlay = () => {\r\n    const { video, api } = this.props;\r\n    api.play();\r\n  };\r\n  renderTimeLineTips = percent => {\r\n    const currentTime = percent * this.state.duration;\r\n    const time = timeStamp(currentTime);\r\n    return <span>{time}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  render() {\r\n    const { duration, currentTime, buffered, hideBar } = this.state;\r\n    const playPercent = Math.round((currentTime / duration) * 100);\r\n    const bufferedPercent = Math.round((buffered / duration) * 100);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={this.changePlayTime} renderTips={this.renderTimeLineTips} />\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","import React from \"react\";\r\nimport flvjs from \"flv.js\";\r\nimport Hls from \"hls.js\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\n\r\n@videoDec\r\nclass ErrorEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.errorTimer = 0;\r\n  }\r\n  componentDidMount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    if (flvPlayer) {\r\n      flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (hlsPlayer) {\r\n      hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n    event.addEventListener(\"error\", this.errorHandle, false);\r\n    event.addEventListener(\"canplay\", this.clearError, false);\r\n    event.on(EventName.RELOAD, this.reload);\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.flvPlayer && nextProps.flvPlayer !== this.props.flvPlayer) {\r\n      nextProps.flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (nextProps.hlsPlayer && nextProps.hlsPlayer !== this.props.hlsPlayer) {\r\n      nextProps.hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    event.removeEventListener(\"error\", this.errorHandle, false);\r\n    flvPlayer && flvPlayer.off(flvjs.Events.ERROR, this.errorHandle);\r\n    hlsPlayer && hlsPlayer.off(Hls.Events.ERROR, this.errorHandle);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    clearTimeout(this.reconnectTimer);\r\n  }\r\n\r\n  reload = () => {\r\n    this.errorTimer = 0;\r\n  };\r\n  /**\r\n   * 清除播放错误状态\r\n   */\r\n  clearError = () => {\r\n    const { event } = this.props;\r\n    if (this.errorTimer > 0) {\r\n      console.warn(\"视频重连成功！\");\r\n      event.emit(EventName.RELOAD_SUCCESS);\r\n      this.errorTimer = 0;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 捕获错误\r\n   */\r\n  errorHandle = (...args) => {\r\n    const { event, api, isHistory, changePlayIndex, playIndex } = this.props;\r\n    const timer = this.errorTimer + 1;\r\n    event.emit(EventName.ERROR, ...args);\r\n    if (timer > 5) {\r\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL), api.unload();\r\n    } else {\r\n      event.emit(EventName.ERROR_RELOAD, timer, ...args);\r\n      console.error(`视频播放出错，正在进行重连${timer}`, ...args);\r\n      this.errorTimer = timer;\r\n      this.reconnectTimer = setTimeout(() => {\r\n        api.reload();\r\n      }, 1000 * 5);\r\n    }\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default ErrorEvent;\r\n","import React from 'react'\r\nimport { videoDec } from '../context'\r\nimport {computedBound} from '../util'\r\n\r\n@videoDec\r\nclass DragEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const { playContainer, event } = props\r\n\r\n    this.dragDom = playContainer.querySelector('.player-mask-layout')\r\n    this.position = {\r\n      start: [0, 0],\r\n      end: [0, 0]\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.dragDom.addEventListener('mousedown', this.openDrag)\r\n    this.props.event.addEventListener('transform', this.transformChange, true)\r\n  }\r\n  componentWillUnmount() {\r\n    this.dragDom.removeEventListener('mousedown', this.openDrag)\r\n    this.props.event.removeEventListener('transform', this.transformChange)\r\n  }\r\n  openDrag = (e) => {\r\n    this.position.start = [e.pageX, e.pageY]\r\n    this.dragDom.addEventListener('mousemove', this.moveChange)\r\n    this.dragDom.addEventListener('mouseup', this.stopDrag)\r\n\r\n  }\r\n  moveChange = (e) => {\r\n    const { api } = this.props\r\n    const currentPosition = api.getPosition()\r\n    this.position.end = [e.pageX, e.pageY]\r\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0])\r\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1])\r\n    const position = [x, y]\r\n    api.setPosition(position)\r\n    this.position.start = [e.pageX, e.pageY]\r\n  }\r\n  stopDrag = () => {\r\n    this.dragDom.removeEventListener('mousemove', this.moveChange)\r\n    this.dragDom.removeEventListener('mouseup', this.stopDrag)\r\n    this.transformChange()\r\n  }\r\n  transformChange = () => {\r\n    const { api } = this.props\r\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale())\r\n    position && api.setPosition(position, true)\r\n  }\r\n  \r\n\r\n  render() {\r\n    return null\r\n  }\r\n}\r\nexport default DragEvent","import { fullscreen, isFullscreen, exitFullscreen } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nexport default class Api {\r\n  constructor(video, playContainer, event, flv, hls) {\r\n    this.player = video;\r\n    this.playContainer = playContainer;\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n    this.event = event;\r\n    this.scale = 1;\r\n    this.position = [0, 0];\r\n  }\r\n  /**\r\n   * 播放器销毁后 动态跟新api下的flv，hls对象\r\n   * @param {*} param0\r\n   */\r\n  updateChunk({ flv, hls }) {\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n  }\r\n  /**\r\n   * 全屏\r\n   */\r\n  requestFullScreen() {\r\n    if (!isFullscreen(this.playContainer)) {\r\n      fullscreen(this.playContainer);\r\n    }\r\n  }\r\n  /**\r\n   * 退出全屏\r\n   */\r\n  cancelFullScreen() {\r\n    if (isFullscreen(this.playContainer)) {\r\n      exitFullscreen();\r\n    }\r\n  }\r\n  play() {\r\n    if (this.player.paused) {\r\n      this.player.play().catch(() => {});\r\n    }\r\n  }\r\n  pause() {\r\n    if (!this.player.paused) {\r\n      this.player.pause().catch(() => {});\r\n    }\r\n  }\r\n  destroy() {\r\n    this.player.removeAttribute(\"src\");\r\n    this.unload();\r\n    if (this.flv) {\r\n      this.flv.destroy();\r\n    }\r\n    if (this.hls) {\r\n      this.flv.destroy();\r\n    }\r\n    this.scale = null;\r\n    this.position = null;\r\n  }\r\n\r\n  /**\r\n   * 设置currentTime实现seek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n  seekTo(seconds, noEmit) {\r\n    const buffered = this.getBufferedTime();\r\n    if (this.flv && buffered[0] > seconds) {\r\n      this.flv.unload();\r\n      this.flv.load();\r\n    }\r\n    this.player.currentTime = seconds;\r\n    if (!noEmit) {\r\n      this.event.emit(EventName.SEEK, seconds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 视频重载\r\n   */\r\n  reload() {\r\n    this.unload();\r\n    this.load();\r\n    this.play();\r\n    this.event.emit(EventName.RELOAD);\r\n    if (this.getCurrentTime !== 0) {\r\n      this.seekTo(0);\r\n    }\r\n  }\r\n  unload() {\r\n    this.flv && this.flv.unload();\r\n    this.hls && this.hls.stopLoad();\r\n  }\r\n  load() {\r\n    this.flv && this.flv.load();\r\n    this.hls && this.hls.loadSource(this.hls.url);\r\n  }\r\n  setVolume(fraction) {\r\n    this.player.volume = fraction;\r\n  }\r\n  mute() {\r\n    this.player.muted = true;\r\n  }\r\n  unmute() {\r\n    this.player.muted = false;\r\n  }\r\n\r\n  /**\r\n   * 开启画中画功能\r\n   */\r\n  requestPictureInPicture() {\r\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\r\n      this.player.requestPictureInPicture();\r\n    }\r\n  }\r\n  /**\r\n   * 关闭画中画功能\r\n   */\r\n  exitPictureInPicture() {\r\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\r\n      document.exitPictureInPicture();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置播放速率\r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.player.playbackRate = rate;\r\n  }\r\n  /**\r\n   * 获取视频总时长\r\n   */\r\n  getDuration() {\r\n    if (!this.player) return null;\r\n    const { duration, seekable } = this.player;\r\n    if (duration === Infinity && seekable.length > 0) {\r\n      return seekable.end(seekable.length - 1);\r\n    }\r\n    return duration;\r\n  }\r\n  /**\r\n   * 获取当前播放时间\r\n   */\r\n  getCurrentTime() {\r\n    if (!this.player) return null;\r\n    return this.player.currentTime;\r\n  }\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getSecondsLoaded() {\r\n    return this.getBufferedTime()[1];\r\n  }\r\n\r\n  /**\r\n   * 获取当前视频缓存的起止时间\r\n   */\r\n  getBufferedTime() {\r\n    if (!this.player) return null;\r\n    const { buffered } = this.player;\r\n    if (buffered.length === 0) {\r\n      return [0, 0];\r\n    }\r\n    const end = buffered.end(buffered.length - 1);\r\n    const start = buffered.start(buffered.length - 1);\r\n    const duration = this.getDuration();\r\n    if (end > duration) {\r\n      return duration;\r\n    }\r\n    return [start, end];\r\n  }\r\n  /**\r\n   * 快进通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  fastForward(second = 5) {\r\n    const duration = this.getDuration();\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime + second;\r\n    this.seekTo(time > duration - 1 ? duration - 1 : time);\r\n  }\r\n\r\n  /**\r\n   * 快退通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  backWind(second = 5) {\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime - second;\r\n    this.seekTo(time < 1 ? 1 : time);\r\n  }\r\n\r\n  /**\r\n   * 视频截屏方法\r\n   */\r\n  snapshot() {\r\n    let canvas = document.createElement(\"canvas\");\r\n    let ctx = canvas.getContext(\"2d\");\r\n    canvas.width = this.player.videoWidth;\r\n    canvas.height = this.player.videoHeight;\r\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height);\r\n    setTimeout(() => {\r\n      canvas.remove();\r\n      canvas = null;\r\n      ctx = null;\r\n    }, 200);\r\n    return canvas.toDataURL();\r\n  }\r\n  setScale(num, isRest = false) {\r\n    let scale = this.scale + num;\r\n    if (isRest) {\r\n      scale = num;\r\n    } else {\r\n      if (scale < 1) {\r\n        scale = 1;\r\n      }\r\n      if (scale > 3) {\r\n        scale = 3;\r\n      }\r\n    }\r\n    this.scale = scale;\r\n    this.player.style.transition = \"transform 0.3s\";\r\n    this.__setTransform();\r\n    this.event.emit(EventName.TRANSFORM);\r\n    setTimeout(() => {\r\n      this.player.style.transition = \"unset\";\r\n    }, 500);\r\n  }\r\n  getScale() {\r\n    return this.scale;\r\n  }\r\n  setPosition(position, isAnimate) {\r\n    this.position = position;\r\n    this.player.style.transition = isAnimate ? \"transform 0.3s\" : \"unset\";\r\n    this.__setTransform();\r\n  }\r\n  getPosition() {\r\n    return this.position;\r\n  }\r\n  __setTransform() {\r\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`;\r\n  }\r\n  getApi() {\r\n    return {\r\n      play: this.play.bind(this),\r\n      reload: this.reload.bind(this),\r\n      pause: this.pause.bind(this),\r\n      seekTo: this.seekTo.bind(this),\r\n      setVolume: this.setVolume.bind(this),\r\n      mute: this.mute.bind(this),\r\n      unmute: this.unmute.bind(this),\r\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\r\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\r\n      setPlaybackRate: this.setPlaybackRate.bind(this),\r\n      destroy: this.destroy.bind(this),\r\n      getDuration: this.getDuration.bind(this),\r\n      getCurrentTime: this.getCurrentTime.bind(this),\r\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\r\n      getBufferedTime: this.getBufferedTime.bind(this),\r\n      fastForward: this.fastForward.bind(this),\r\n      backWind: this.backWind.bind(this),\r\n      snapshot: this.snapshot.bind(this),\r\n      requestFullScreen: this.requestFullScreen.bind(this),\r\n      cancelFullScreen: this.cancelFullScreen.bind(this),\r\n      __player: this.player\r\n    };\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\n\r\n@videoDec\r\nclass LiveHeart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.progressTime = Date.now();\r\n    this.timer = null;\r\n    this.isPlayError = false;\r\n    this.errorTimer = 0;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"progress\", this.updateProgress);\r\n    event.on(EventName.ERROR, this.errorHandle);\r\n    event.on(EventName.RELOAD_SUCCESS, this.clearHandle);\r\n    this.heartAction();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.event.removeEventListener(\"progress\", this.updateProgress);\r\n    event.off(EventName.ERROR, this.errorHandle);\r\n    event.off(EventName.RELOAD_SUCCESS, this.clearHandle);\r\n    clearInterval(this.timer);\r\n  }\r\n\r\n  errorHandle = () => {\r\n    this.isPlayError = true;\r\n  };\r\n  clearHandle = () => {\r\n    this.isPlayError = false;\r\n  };\r\n  /**\r\n   * 监听视频进度\r\n   */\r\n  updateProgress = () => {\r\n    this.progressTime = Date.now();\r\n    this.focusSeekAction();\r\n  };\r\n\r\n  /**\r\n   * 心跳监听是否视频断流了\r\n   */\r\n  heartAction = () => {\r\n    const { api, event } = this.props;\r\n    this.timer = setInterval(() => {\r\n      const timeNow = Date.now();\r\n      const currentTime = api.getCurrentTime();\r\n      if (currentTime > 0) {\r\n        if (timeNow - this.progressTime > 10 * 1000 && !this.isPlayError) {\r\n          console.warn(\"当前实时视频缓存未更新，执行reload操作\");\r\n          api.reload();\r\n        } else {\r\n          this.errorTimer = 0;\r\n        }\r\n      } else {\r\n        if (this.errorTimer >= 5) {\r\n          event.emit(EventName.RELOAD_FAIL, this.errorTimer);\r\n          api.unload();\r\n        } else {\r\n          this.errorTimer++;\r\n          api.reload();\r\n          event.emit(EventName.ERROR_RELOAD, this.errorTimer);\r\n        }\r\n      }\r\n    }, 1000 * 5);\r\n  };\r\n  /**\r\n   * 更新currentTime\r\n   */\r\n  focusSeekAction = () => {\r\n    const { api } = this.props;\r\n    const current = api.getCurrentTime();\r\n    const buffered = api.getSecondsLoaded();\r\n    if (buffered - current > 5) {\r\n      console.warn(`当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered - 2}`);\r\n      api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0);\r\n    }\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default LiveHeart;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport VideoEvent from \"./event\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"./util\";\r\nimport { Provider } from \"./context\";\r\nimport ContrallerBar from \"./contraller_bar\";\r\nimport VideoMessage from \"./message\";\r\nimport TimeLine from \"./time_line\";\r\nimport ErrorEvent from \"./event/errorEvent\";\r\nimport DragEvent from \"./event/dragEvent\";\r\nimport Api from \"./api\";\r\nimport LiveHeart from \"./live_heart\";\r\nimport \"./style/index.less\";\r\n\r\nclass LMPlayer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playerType = null;\r\n    this.playContainerRef = React.createRef();\r\n    this.playContainer = null;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    this.initPlayer();\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n    if (this.props.playsinline) {\r\n      this.player.setAttribute(\"playsinline\", \"\");\r\n      this.player.setAttribute(\"webkit-playsinline\", \"\");\r\n      this.player.setAttribute(\"x5-playsinline\", \"\");\r\n    }\r\n    if (this.props.autoPlay) {\r\n      this.api.getApi().play();\r\n    }\r\n    this.forceUpdate();\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n  }\r\n  componentWillUnmount() {\r\n    this.event.destroy();\r\n    this.api.destroy();\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playerType = null;\r\n    this.playContainerRef = null;\r\n    this.playContainer = null;\r\n  }\r\n\r\n  initPlayer = () => {\r\n    if (!this.props.file) {\r\n      return null;\r\n    }\r\n    const type = getVideoType(this.props.file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, this.props);\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, this.props.file);\r\n    } else {\r\n      this.player.src = this.props.file;\r\n    }\r\n  };\r\n\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        {!this.props.isLive && <TimeLine />}\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        <DragEvent />\r\n        {this.props.isLive && <LiveHeart key={this.props.file} />}\r\n      </>\r\n    );\r\n  };\r\n  getPlayUrl = () => {\r\n    return this.props.file;\r\n  };\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n    return Object.assign({}, api, event, { getPlayUrl: this.getPlayUrl, playContainer: this.playContainer });\r\n  };\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerType: this.playerType,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer\r\n    };\r\n  };\r\n  render() {\r\n    const { autoPlay, poster } = this.props;\r\n    const providerValue = this.getProvider();\r\n    return (\r\n      <div className=\"lm-player-container\" ref={this.playContainerRef}>\r\n        <div className=\"player-mask-layout\">\r\n          <video autoPlay={autoPlay} muted poster={poster} controls={false} />\r\n        </div>\r\n        <Provider value={providerValue}>{this.renderVideoTools()}</Provider>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LMPlayer;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport Slider from \"../slider\";\r\nimport { dateFormat } from \"../util\";\r\nimport EventName from '../event/eventName'\r\nimport \"../style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 1,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      isEnd: false,\r\n      hideBar:false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  /**\r\n   * reload事件触发时 清除结束状态\r\n   */\r\n  reload = () => {\r\n    const {api} = this.props\r\n    this.setState({\r\n      isEnd: false,\r\n      currentTime: api.getCurrentTime()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 设置播放结束状态，用于修正current圆点位置\r\n   */\r\n  historyPlayEnd = () => {\r\n    this.setState({\r\n      isEnd: true\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 更新播放时长\r\n   */\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 获取播放时间\r\n   */\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 切换播放进度\r\n   */\r\n  changePlayTime = percent => {\r\n    const { seekTo, historyList } = this.props;\r\n    const currentTime = percent * historyList.duration;\r\n    const playIndex = historyList.fragments.findIndex(v => v.end > currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    if (fragment.file) {\r\n      seekTo(currentTime);\r\n      this.setState({ currentTime, isEnd: false });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 切换完成自动播放\r\n   */\r\n  seekendPlay = () => {\r\n    const { api } = this.props;\r\n    api.play();\r\n  };\r\n\r\n  /**\r\n   * 时间轴提示\r\n   */\r\n  renderTimeLineTips = percent => {\r\n    const { historyList } = this.props;\r\n    const currentTime = percent * historyList.duration * 1000;\r\n    const date = dateFormat(new Date(historyList.beginDate).getTime() + currentTime);\r\n    return <span>{date}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  computedLineList = historyList => {\r\n    const duration = historyList.duration;\r\n    return historyList.fragments.map(v => {\r\n      return {\r\n        disabled: !v.file,\r\n        size: ((v.end - v.begin) / duration) * 100\r\n      };\r\n    });\r\n  };\r\n  render() {\r\n    const { historyList, playIndex } = this.props;\r\n    const { currentTime, buffered, isEnd ,hideBar } = this.state;\r\n    const lineList = this.computedLineList(historyList);\r\n    const currentLine = lineList.filter((v, i) => i < playIndex).map(v => v.size);\r\n    const currentIndexTime = currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0];\r\n    const playPercent = Math.round((currentTime / historyList.duration) * 100 + currentIndexTime);\r\n    const bufferedPercent = Math.round((buffered / historyList.duration) * 100 + currentIndexTime);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider\r\n          className=\"time-line-box\"\r\n          currentPercent={isEnd ? \"100\" : playPercent}\r\n          availablePercent={bufferedPercent}\r\n          onChange={this.changePlayTime}\r\n          renderTimeLineTips={this.renderTimeLineTips}\r\n        >\r\n          <>\r\n            {lineList.map((v, i) => {\r\n              const currentSizeLine = lineList.filter((v, i2) => i2 < i).map(v => v.size);\r\n              const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0];\r\n              return (\r\n                <div className={`history-time-line-item ${v.disabled ? \"history-time-line-disabled\" : \"\"}`} key={i} style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }} />\r\n              );\r\n            })}\r\n          </>\r\n        </Slider>\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","/**\r\n * history下使用 用户切换下个播放地址\r\n */\r\n\r\nimport React from \"react\";\r\nimport { videoDec } from \"../context\";\r\n\r\n@videoDec\r\nclass PlayEnd extends React.Component {\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  endedHandle = () => {\r\n    let index = this.props.playIndex\r\n    this.props.changePlayIndex(index + 1)\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default PlayEnd;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\n\r\n@videoDec\r\nclass ContrallerEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timer = null;\r\n  }\r\n  componentDidMount() {\r\n    const { playContainer, event } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 5 * 1000);\r\n  }\r\n  componentWillUnmount() {\r\n    const { playContainer } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    clearTimeout(this.timer);\r\n  }\r\n  showContraller = () => {\r\n    const { event } = this.props;\r\n    event.emit(EventName.SHOW_CONTRALLER);\r\n    this.hideContraller();\r\n  };\r\n  hideContraller = () => {\r\n    const { event } = this.props;\r\n    clearTimeout(this.timer);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 3 * 1000);\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default ContrallerEvent;\r\n","import Player from \"../player\";\r\nimport ContrallerBar from \"../contraller_bar\";\r\nimport VideoMessage from \"../message\";\r\nimport HistoryTimeLine from \"./time_line_history\";\r\nimport ErrorEvent from \"../event/errorEvent\";\r\nimport DragEvent from \"../event/dragEvent\";\r\nimport Api from \"../api\";\r\nimport VideoEvent from \"../event\";\r\nimport PlayEnd from \"./play_end\";\r\nimport EventName from \"../event/eventName\";\r\nimport ContrallerEvent from \"../event/contrallerEvent\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"../util\";\r\n\r\nclass HistoryPlayer extends Player {\r\n  constructor(props) {\r\n    super(props);\r\n    this.playIndex = 0;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    this.checkFirstFile();\r\n    this.initPlayer(this.playIndex, true);\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n\r\n    if (this.props.playsinline) {\r\n      this.player.setAttribute(\"playsinline\", \"\");\r\n      this.player.setAttribute(\"webkit-playsinline\", \"\");\r\n      this.player.setAttribute(\"x5-playsinline\", \"\");\r\n    }\r\n    if (this.props.autoPlay) {\r\n      this.api.getApi().play();\r\n    }\r\n    this.forceUpdate();\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n  }\r\n\r\n  /**\r\n   * 历史视频专用\r\n   * 计算视频播放时默认的index，默认去第一个有播放地址的，若有传defaultTime那计算index,当前index没有值，则取默认有file的第一个\r\n   */\r\n  checkFirstFile = () => {\r\n    const { defaultTime, historyList } = this.props;\r\n    if (!historyList) {\r\n      return;\r\n    }\r\n    if (!defaultTime) {\r\n      this.playIndex = historyList.fragments.findIndex(v => !!v.file);\r\n    } else {\r\n      this.playIndex = this.computedIndexFormTime(defaultTime);\r\n      if (this.playIndex === -1 || !historyList.fragments[this.playIndex].file) {\r\n        this.playIndex = historyList.fragments.findIndex(v => !!v.file);\r\n      }\r\n    }\r\n  };\r\n  initPlayer = (index, isFrist) => {\r\n    const { historyList } = this.props;\r\n    if (!historyList || !historyList.fragments[index] || !historyList.fragments[index].file) {\r\n      return null;\r\n    }\r\n    if (this.flv) {\r\n      try {\r\n        this.flv.unload();\r\n        this.flv.destroy();\r\n      } catch (e) {\r\n        console.warn(e);\r\n      }\r\n      this.flv = null;\r\n    }\r\n    if (this.hls) {\r\n      try {\r\n        this.hls.stopLoad();\r\n        this.hls.destroy();\r\n      } catch (e) {\r\n        console.warn(e);\r\n      }\r\n      this.hls = null;\r\n    }\r\n    const type = getVideoType(historyList.fragments[index].file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, { file: historyList.fragments[index].file });\r\n      this.api && this.api.updateChunk({ flv: this.flv });\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, historyList.fragments[index].file);\r\n      this.api && this.api.updateChunk({ hls: this.hls });\r\n    } else {\r\n      this.player.src = historyList.fragments[index].file;\r\n    }\r\n    if (!isFrist) {\r\n      this.playIndex = index;\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n  /**\r\n   * 历史视频专用\r\n   * 修改历史视频播放的索引。\r\n   */\r\n  changePlayIndex = index => {\r\n    const { historyList } = this.props;\r\n    if (!historyList || !historyList.fragments[index]) {\r\n      !historyList.fragments[index] && this.event.emit(EventName.HISTORY_PLAY_END);\r\n      return;\r\n    }\r\n    if (!historyList.fragments[index].file) {\r\n      this.changePlayIndex(index + 1);\r\n    } else {\r\n      this.initPlayer(index);\r\n    }\r\n    this.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n  };\r\n\r\n  /**\r\n   * 覆盖Player中暴漏的api，重写seek相关的方法\r\n   */\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n\r\n    const historyApi = {\r\n      seekTo: this.seekTo\r\n    };\r\n    return Object.assign({}, api, event, historyApi);\r\n  };\r\n\r\n  /**\r\n   * 根据时间计算当前对应的播放索引\r\n   */\r\n  computedIndexFormTime = time => {\r\n    const { historyList } = this.props;\r\n    return historyList.fragments.findIndex(v => v.end > time);\r\n  };\r\n\r\n  /**\r\n   * 重写api下的seekTo方法\r\n   */\r\n  seekTo = currentTime => {\r\n    const playIndex = this.computedIndexFormTime(currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    const seekTime = currentTime - fragment.begin - 1;\r\n    this.api.pause();\r\n    if (playIndex !== this.playIndex) {\r\n      this.changePlayIndex(playIndex);\r\n    }\r\n    this.api.seekTo(seekTime, true);\r\n    this.event.emit(EventName.SEEK, currentTime);\r\n  };\r\n\r\n  /**\r\n   * 重写reload方法\r\n   */\r\n  reloadHistory = () => {\r\n    this.changePlayIndex(0);\r\n    this.api.seekTo(0);\r\n    this.event.emit(EventName.RELOAD);\r\n  };\r\n  /**\r\n   * 覆盖Player中的context的value，新增一些历史视频专用的方法\r\n   */\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerType: this.playerType,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer,\r\n      changePlayIndex: this.changePlayIndex,\r\n      playIndex: this.playIndex,\r\n      historyList: this.props.historyList,\r\n      seekTo: this.seekTo,\r\n      isHistory: true,\r\n      reloadHistory: this.reloadHistory\r\n    };\r\n  };\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        <HistoryTimeLine />\r\n        <ContrallerEvent />\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        <DragEvent />\r\n        <PlayEnd />\r\n      </>\r\n    );\r\n  };\r\n}\r\n\r\nexport default HistoryPlayer;\r\n","import Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\nimport { createHistoryPlayer, createPlayer } from \"./createPlayer\";\r\n\r\nPlayer.HistoryPlayer = HistoryPlayer;\r\nPlayer.createHistoryPlayer = createHistoryPlayer;\r\nPlayer.createPlayer = createPlayer;\r\n\r\nexport default Player;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\n\r\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <Player\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </Player>,\r\n    container\r\n  );\r\n}\r\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <HistoryPlayer\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </HistoryPlayer>,\r\n    container\r\n  );\r\n}\r\n"],"sourceRoot":""}