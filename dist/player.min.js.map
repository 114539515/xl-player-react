{"version":3,"sources":["webpack://LMPlayer/webpack/universalModuleDefinition","webpack://LMPlayer/webpack/bootstrap","webpack://LMPlayer/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://LMPlayer/external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://LMPlayer/external {\"commonjs\":\"flv.lm.js\",\"commonjs2\":\"flv.lm.js\",\"amd\":\"flv.lm.js\",\"root\":\"flvjs\"}","webpack://LMPlayer/external {\"commonjs\":\"hls.js\",\"commonjs2\":\"hls.js\",\"amd\":\"hls.js\",\"root\":\"Hls\"}","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://LMPlayer/./src/event/index.js","webpack://LMPlayer/./src/util.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://LMPlayer/./src/context.js","webpack://LMPlayer/./src/iconfont.js","webpack://LMPlayer/./src/slider.js","webpack://LMPlayer/./src/contraller_bar/bar.js","webpack://LMPlayer/./src/event/eventName.js","webpack://LMPlayer/./src/contraller_bar/left_bar.js","webpack://LMPlayer/./src/contraller_bar/right_bar.js","webpack://LMPlayer/./src/contraller_bar/index.js","webpack://LMPlayer/./src/event/contrallerEvent.js","webpack://LMPlayer/./src/message.js","webpack://LMPlayer/./src/time_line.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://LMPlayer/./src/event/errorEvent.js","webpack://LMPlayer/./src/event/dragEvent.js","webpack://LMPlayer/./src/api.js","webpack://LMPlayer/./src/event/browserTabEvent.js","webpack://LMPlayer/./src/live_heart.js","webpack://LMPlayer/./src/player.js","webpack://LMPlayer/./src/history/time_line_history.js","webpack://LMPlayer/./src/history/play_end.js","webpack://LMPlayer/./src/history/index.js","webpack://LMPlayer/./src/createPlayer.js","webpack://LMPlayer/./src/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","_typeof2","obj","iterator","constructor","_typeof","_possibleConstructorReturn","self","ReferenceError","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","VideoEvent","video","this","events","playerEvents","eventName","handle","listener","push","type","addEventListener","index","findIndex","v","splice","removeEventListener","_len","arguments","data","Array","_key","forEach","apply","_this","keys","fn","createHlsPlayer","file","Hls","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","loadSource","attachMedia","createFlvPlayer","options","_options$flvOptions","flvOptions","_options$flvConfig","flvConfig","flvjs","isSupported","createPlayer","assign","url","enableStashBuffer","stashInitialSize","isLive","attachMediaElement","load","getVideoType","urlInfo","URL","path","concat","origin","pathname","resultArr","exec","indexOf","suffix","replace","isFullscreen","ele","document","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","map","computedBound","currentPosition","scale","lx","ly","eleRect","getBoundingClientRect","w","width","h","height","x","y","_objectWithoutProperties","source","excluded","sourceKeys","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","videoContext","React","createContext","Provider","Consumer","videoDec","Component","ComponentWithVideoDec","_React$Component","_this$props","forwardRef","external_commonjs_react_commonjs2_react_amd_react_root_React_default","a","createElement","context","ref","IconFont","_ref","_ref$className","className","Slider","renderSliderTips","e","renderTips","_this$layoutDom$getBo","layoutDom","top","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","body","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","event","_this$layoutDom$getBo2","sliderDomRef","createRef","lineDom","dragDom","currentPercent","nextProps","ReactDOM","findDOMNode","current","querySelector","_this$layoutDom$getBo3","dx","_this$state","_this$props$available","availablePercent","_this$props$className","style","children","draggable","left","slider_Tips","visibel","Tips","_this2","appendChild","removeChild","_this$props2","_this$props2$classNam","createPortal","Bar","_ref$visibel","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","seek","historyEnd","historyPlayEnd","updateRender","mounted","forceUpdate","changePlayStatus","api","reloadHistory","paused","play","pause","mutedChange","muted","unmute","mute","volumechange","openSliderVolume","closeSliderVolume","onChangeVolume","volume","_this$props3","setVolume","parseFloat","toFixed","reload","isHistory","emit","EventName","on","off","_this$props4","playerProps","_playerProps$leftExtC","leftExtContents","_playerProps$leftMidE","leftMidExtContents","volumeType","onClick","title","onMouseOver","onMouseOut","src_slider","precent","Math","round","RightBar","update","fullscreen","playContainer","cancelFullScreen","requestFullScreen","setScale","position","getPosition","getScale","setPosition","snapshot","isScale","_playerProps$rightExt","rightExtContents","_playerProps$rightMid","rightMidExtContents","isfull","Fragment","ContrallerBar","hideContraller","hideBar","showContraller","left_bar","right_bar","ContrallerEvent","clearTimeout","timer","setTimeout","VideoMessage","clearReloadMessage","message","status","errorReload","loading","reloadFail","reloadSuccess","openLoading","closeLoading","TineLine","getDuration","duration","getCurrentTime","currentTime","buffered","getSecondsLoaded","getBuffered","changePlayTime","seekTo","seekendPlay","renderTimeLineTips","time","second_time","ceil","second","min","floor","hour","timeStamp","fastForward","backWind","playPercent","bufferedPercent","_toConsumableArray","arr","isArray","arr2","arrayWithoutHoles","iter","toString","from","iterableToArray","nonIterableSpread","ErrorEvent","clearErrorTimer","errorTimer","reconnectTimer","clearError","console","warn","errorHandle","_console","args","error","changePlayIndex","playIndex","errorReloadTimer","unload","loader","reloadAction","flvPlayer","hlsPlayer","Events","DragEvent","openDrag","start","pageY","end","transformChange","isDraggable","Api","flv","hls","element","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","removeAttribute","destroy","seconds","noEmit","getBufferedTime","stopLoad","startLoad","swapAudioCodec","recoverMediaError","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","rate","playbackRate","_this$player","seekable","Infinity","undefined","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","num","isRest","transition","__setTransform","isAnimate","transform","setPlaybackRate","__player","getHiddenProp","prefixes","browserTabEvent","evtname","visibilityState","getVisibilityState","LiveHeart","browserTabChange","BrowserTab","focusSeekAction","canplay","isCanPlay","LMPlayer","initPlayer","src","renderVideoTools","contraller_bar","src_message","dragEvent","contrallerEvent","errorEvent","live_heart","src_time_line","getPlayUrl","getPlayerApiContext","getApi","getProvider","playContainerRef","willReCreatePlayer","onInitPlayer","autoPlay","autoplay","poster","_this$props$preload","preload","_this$props$muted","_this$props$loop","loop","_this$props$playsinli","playsinline","providerValue","controls","playsInline","defaultProps","isEnd","historyList","fragments","date","timetemp","Date","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","dateFormat","beginDate","computedLineList","disabled","size","begin","lineList","currentLine","filter","currentIndexTime","reduce","currentSizeLine","i2","currentIndexSize","PlayEnd","endedHandle","HistoryPlayer","updateChunk","historyApi","computedIndexFormTime","seekTime","time_line_history","play_end","defaultTime","container","render","src_player","unmountComponentAtNode","createHistoryPlayer","_ref2","src_history","__webpack_exports__"],"mappings":"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","file":"player.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"flv.lm.js\"), require(\"hls.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"LMPlayer\", [\"react\", \"react-dom\", \"flv.lm.js\", \"hls.js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LMPlayer\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"flv.lm.js\"), require(\"hls.js\"));\n\telse\n\t\troot[\"LMPlayer\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"flvjs\"], root[\"Hls\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","class VideoEvent {\r\n  constructor(video) {\r\n    this.video = video;\r\n    this.events = {};\r\n    this.playerEvents = {};\r\n  }\r\n  on(eventName, handle) {\r\n    this.events && this.events[eventName] ? this.events[eventName].listener.push(handle) : (this.events[eventName] = { type: eventName, listener: [handle] });\r\n  }\r\n  addEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle]);\r\n      this.video.addEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  removeEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      if (!this.playerEvents || this.playerEvents[eventName]) {\r\n        return;\r\n      }\r\n      let index = this.playerEvents[eventName].findIndex(v => v === handle);\r\n      index > -1 && this.playerEvents[eventName].splice(index, 1);\r\n      this.video.removeEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  emit(eventName, ...data) {\r\n    if (!this.events || !this.events[eventName]) {\r\n      return;\r\n    }\r\n    this.events[eventName].listener.forEach(v => {\r\n      v(...data);\r\n    });\r\n  }\r\n  off(eventName, handle) {\r\n    if (!this.events || !this.events.eventName) {\r\n      return;\r\n    }\r\n    let index = this.events[eventName].listener.findIndex(v => v === handle);\r\n    index > -1 && this.events[eventName].listener.splice(index, 1);\r\n  }\r\n  destroy() {\r\n    Object.keys(this.playerEvents).forEach(key => {\r\n      this.playerEvents[key].forEach(fn => {\r\n        this.removeEventListener(key, fn);\r\n      });\r\n    });\r\n    this.playerEvents = null;\r\n    this.events = null;\r\n  }\r\n}\r\n\r\nexport default VideoEvent;\r\n","import flvjs from \"flv.lm.js\";\r\nimport * as Hls from \"hls.js\";\r\n\r\n/**\r\n * 创建HLS对象\r\n * @param {*} video\r\n * @param {*} file\r\n */\r\nexport function createHlsPlayer(video, file) {\r\n  if (Hls.isSupported()) {\r\n    const player = new Hls({\r\n      liveDurationInfinity: true,\r\n      levelLoadingTimeOut: 15000,\r\n      fragLoadingTimeOut: 25000,\r\n      enableWorker: true\r\n    });\r\n    player.loadSource(file);\r\n    player.attachMedia(video);\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * 创建FLV对象\r\n * @param {*} video\r\n * @param {*} options\r\n */\r\nexport function createFlvPlayer(video, options) {\r\n  const { flvOptions = {}, flvConfig = {} } = options;\r\n  if (flvjs.isSupported()) {\r\n    const player = flvjs.createPlayer(\r\n      Object.assign({}, flvOptions, {\r\n        type: \"flv\",\r\n        url: options.file\r\n      }),\r\n      Object.assign({}, flvConfig, {\r\n        enableWorker: true,\r\n        // lazyLoad: false,\r\n        // Indicates how many seconds of data to be kept for lazyLoad.\r\n        // lazyLoadMaxDuration: 0,\r\n        // autoCleanupMaxBackwardDuration: 3,\r\n        // autoCleanupMinBackwardDuration: 2,\r\n        // autoCleanupSourceBuffer: true,\r\n        enableStashBuffer: false,\r\n        stashInitialSize: 128,\r\n        isLive: options.isLive || true\r\n      })\r\n    );\r\n    player.attachMediaElement(video);\r\n    player.load();\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取播放文件类型\r\n * @param {*} url\r\n */\r\nexport function getVideoType(url) {\r\n  const urlInfo = new URL(url);\r\n  const path = `${urlInfo.origin}${urlInfo.pathname}`;\r\n  const reg = /([^\\.\\/\\\\]+)\\.(([a-z]|[0-9])+(\\?\\S+)?)$/i;\r\n  const resultArr = reg.exec(path);\r\n  if (!resultArr) {\r\n    return url.indexOf(\".flv\") > -1 ? \"flv\" : \"hls\";\r\n  }\r\n  const suffix = resultArr[2].replace(resultArr[4], \"\");\r\n  if (!suffix) {\r\n    return url.indexOf(\".flv\") > -1 ? \"flv\" : \"hls\";\r\n  }\r\n  return suffix;\r\n}\r\n\r\n/**\r\n * 播放时间转字符串\r\n * @param {*} second_time\r\n */\r\nexport function timeStamp(second_time) {\r\n  let time = Math.ceil(second_time);\r\n  if (time > 60) {\r\n    let second = Math.ceil(second_time % 60);\r\n    let min = Math.floor(second_time / 60);\r\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    if (min > 60) {\r\n      min = Math.ceil((second_time / 60) % 60);\r\n      let hour = Math.floor(second_time / 60 / 60);\r\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    } else {\r\n      time = `00:${time}`;\r\n    }\r\n  } else {\r\n    time = `00:00:${time < 10 ? `0${time}` : time}`;\r\n  }\r\n\r\n  return time;\r\n}\r\n\r\n/**\r\n * 日期格式化\r\n * @param {*} timetemp\r\n */\r\nexport function dateFormat(timetemp) {\r\n  const date = new Date(timetemp);\r\n  let YYYY = date.getFullYear();\r\n  let DD = date.getDate();\r\n  let MM = date.getMonth() + 1;\r\n  let hh = date.getHours();\r\n  let mm = date.getMinutes();\r\n  let ss = date.getSeconds();\r\n  return `${YYYY}.${MM > 10 ? MM : \"0\" + MM}.${DD > 10 ? DD : \"0\" + DD} ${hh > 10 ? hh : \"0\" + hh}.${mm > 10 ? mm : \"0\" + mm}.${\r\n    ss > 10 ? ss : \"0\" + ss\r\n  }`;\r\n}\r\n\r\n/**\r\n * 全屏\r\n * @param {*} element\r\n */\r\nexport function fullscreen(element) {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen();\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen();\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen();\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * exitFullscreen 退出全屏\r\n * @param  {Objct} element 选择器\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * 判读是否支持全屏\r\n */\r\nexport function fullscreenEnabled() {\r\n  return (\r\n    document.fullscreenEnabled ||\r\n    document.mozFullScreenEnabled ||\r\n    document.webkitFullscreenEnabled ||\r\n    document.msFullscreenEnabled\r\n  );\r\n}\r\n\r\n/**\r\n * [isFullscreen 判断浏览器是否全屏]\r\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\r\n */\r\nexport function isFullscreen(ele) {\r\n  if (!ele) {\r\n    return false;\r\n  }\r\n  return (\r\n    document.fullscreenElement === ele ||\r\n    document.msFullscreenElement === ele ||\r\n    document.mozFullScreenElement === ele ||\r\n    document.webkitFullscreenElement === ele ||\r\n    false\r\n  );\r\n}\r\n// 添加 / 移除 全屏事件监听\r\nexport function fullScreenListener(isAdd, fullscreenchange) {\r\n  const funcName = isAdd ? \"addEventListener\" : \"removeEventListener\";\r\n  const fullScreenEvents = [\"fullscreenchange\", \"mozfullscreenchange\", \"webkitfullscreenchange\", \"msfullscreenchange\"];\r\n  fullScreenEvents.map(v => document[funcName](v, fullscreenchange));\r\n}\r\n\r\n/**\r\n * 计算视频拖拽边界\r\n * @param {*} ele\r\n * @param {*} currentPosition\r\n * @param {*} scale\r\n */\r\nexport function computedBound(ele, currentPosition, scale) {\r\n  const data = currentPosition;\r\n  const eleRect = ele.getBoundingClientRect();\r\n  const w = eleRect.width;\r\n  const h = eleRect.height;\r\n  let lx = 0,\r\n    ly = 0;\r\n  if (scale === 1) {\r\n    return [0, 0];\r\n  }\r\n  lx = (w * (scale - 1)) / 2 / scale;\r\n  ly = (h * (scale - 1)) / 2 / scale;\r\n  let x = 0,\r\n    y = 0;\r\n  if (data[0] >= 0 && data[0] > lx) {\r\n    x = lx;\r\n  }\r\n  if (data[0] >= 0 && data[0] < lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[0] < 0 && data[0] < -lx) {\r\n    x = -lx;\r\n  }\r\n  if (data[0] < 0 && data[0] > -lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[1] >= 0 && data[1] > ly) {\r\n    y = ly;\r\n  }\r\n  if (data[1] >= 0 && data[1] < ly) {\r\n    y = data[1];\r\n  }\r\n\r\n  if (data[1] < 0 && data[1] < -ly) {\r\n    y = -ly;\r\n  }\r\n  if (data[1] < 0 && data[1] > -ly) {\r\n    y = data[1];\r\n  }\r\n  if (x !== data[0] || y !== data[1]) {\r\n    return [x, y];\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from \"react\";\r\n\r\nconst videoContext = React.createContext(null);\r\n\r\nexport const Provider = videoContext.Provider;\r\nexport const Consumer = videoContext.Consumer;\r\n\r\nexport function videoDec(Component) {\r\n  class ComponentWithVideoDec extends React.Component {\r\n    render() {\r\n      const { forwardRef, ...props } = this.props;\r\n      return <Consumer>{context => <Component {...props} {...context} ref={forwardRef} />}</Consumer>;\r\n    }\r\n  }\r\n  return React.forwardRef((props, ref) => <ComponentWithVideoDec {...props} forwardRef={ref} />);\r\n}\r\n","import React from \"react\";\r\nimport \"./style/iconfont.less\";\r\nexport default function IconFont({ type, className = \"\", ...props }) {\r\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />;\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/slider.less\";\r\n\r\nclass Slider extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.sliderDomRef = React.createRef();\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = false;\r\n    this.state = {\r\n      value: this.props.currentPercent || 0,\r\n      tempValue: 0,\r\n      showTips: false,\r\n      tipsX: 0,\r\n      tipsY: 0\r\n    };\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!this.dragFlag) {\r\n      this.setState({ value: nextProps.currentPercent || 0 });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.layoutDom = ReactDOM.findDOMNode(this.sliderDomRef.current);\r\n    this.dragDom = this.layoutDom.querySelector(\".drag-change-icon\");\r\n    this.lineDom = this.layoutDom.querySelector(\".slider-content\");\r\n\r\n    this.layoutDom.addEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.addEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.addEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.addEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.addEventListener(\"mousedown\", this.startDrag, false);\r\n  }\r\n  componentWillUnmount() {\r\n    this.layoutDom.removeEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.removeEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.removeEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.removeEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.removeEventListener(\"mousedown\", this.startDrag, false);\r\n\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n\r\n    this.sliderDomRef = null;\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = null;\r\n  }\r\n  renderSliderTips = e => {\r\n    const { renderTips } = this.props;\r\n    if (!renderTips) {\r\n      return;\r\n    }\r\n    const { x, width, top } = this.layoutDom.getBoundingClientRect();\r\n    const tipsX = e.pageX;\r\n    let percent = (e.pageX - x) / width;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent });\r\n  };\r\n  hideSliderTips = () => {\r\n    this.setState({ showTips: false });\r\n  };\r\n  cancelPropagation = e => {\r\n    e.stopPropagation();\r\n  };\r\n  startDrag = e => {\r\n    e.stopPropagation();\r\n    this.dragFlag = true;\r\n    document.body.addEventListener(\"mousemove\", this.moveChange);\r\n    document.body.addEventListener(\"mouseup\", this.stopDrag);\r\n  };\r\n  moveChange = e => {\r\n    e.stopPropagation();\r\n    const percent = this.computedPositionForEvent(e);\r\n    this.setState({ value: percent });\r\n  };\r\n  stopDrag = e => {\r\n    e.stopPropagation();\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n    this.dragFlag = false;\r\n    let percent = this.state.value / 100;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  computedPositionForEvent(e) {\r\n    const { x, width } = this.layoutDom.getBoundingClientRect();\r\n    const { pageX } = e;\r\n    let dx = pageX - x;\r\n    if (dx > width) {\r\n      dx = width;\r\n    }\r\n    if (dx < 0) {\r\n      dx = 0;\r\n    }\r\n    return (dx / width) * 100;\r\n  }\r\n  changeCurrentValue = event => {\r\n    event.stopPropagation();\r\n    const { width, x } = this.layoutDom.getBoundingClientRect();\r\n    let percent = (event.pageX - x) / width;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  render() {\r\n    const { value, showTips, tipsX, tipsY } = this.state;\r\n    const { availablePercent = 0, className = \"\" } = this.props;\r\n    return (\r\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\r\n        <div className=\"slider-content\">\r\n          <div className=\"slider-max-line\" />\r\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\r\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\r\n          {this.props.children}\r\n        </div>\r\n        <div className=\"slider-other-content\">\r\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\r\n        </div>\r\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }}>\r\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\r\n        </Tips>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Tips extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.ele = document.createElement(\"div\");\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.ele);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.ele);\r\n    this.ele = null;\r\n  }\r\n  render() {\r\n    const { visibel, children, style, className = \"\" } = this.props;\r\n    return ReactDOM.createPortal(\r\n      visibel ? (\r\n        <div className={className} style={style}>\r\n          {children}\r\n        </div>\r\n      ) : null,\r\n      this.ele\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nexport default function Bar({ visibel = true, className = \"\", children, ...props }) {\r\n  if (visibel === false) {\r\n    return null;\r\n  }\r\n  return (\r\n    <span className={`contraller-bar-item ${className}`} {...props}>\r\n      {children}\r\n    </span>\r\n  );\r\n}\r\n","export default {\r\n  RELOAD: \"reload\", //手动视频重载\r\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\r\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\r\n  ERROR: \"error\", //视频出错\r\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\r\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\r\n  SEEK: \"seek\", //跳跃播放时间\r\n  TRANSFORM: \"transform\", //视频容器缩放\r\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\r\n  HIDE_CONTRALLER:\"hideContraller\",\r\n  SHOW_CONTRALLER:\"showContraller\",\r\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\r\n};\r\n","import React from \"react\";\r\nimport IconFont from \"../iconfont\";\r\nimport { videoDec } from \"../context\";\r\nimport Slider from \"../slider\";\r\nimport Bar from \"./bar\";\r\nimport EventName from \"../event/eventName\";\r\n\r\n@videoDec\r\nclass LeftBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openSliderVolume: false\r\n    };\r\n    this.historyEnd = false;\r\n    this.mounted = false;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    this.mounted = true;\r\n    event.addEventListener(\"play\", this.updateRender);\r\n    event.addEventListener(\"pause\", this.updateRender);\r\n    event.addEventListener(\"volumechange\", this.volumechange);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.SEEK, this.seek);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    this.mounted = false;\r\n    event.removeEventListener(\"play\", this.updateRender);\r\n    event.removeEventListener(\"pause\", this.updateRender);\r\n    event.removeEventListener(\"volumechange\", this.volumechange);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.SEEK, this.seek);\r\n  }\r\n  seek = () => {\r\n    this.historyEnd = false;\r\n  };\r\n  historyPlayEnd = () => {\r\n    this.historyEnd = true;\r\n  };\r\n  updateRender = () => {\r\n    this.mounted && this.forceUpdate();\r\n  };\r\n  changePlayStatus = () => {\r\n    const { api, video } = this.props;\r\n    if (this.historyEnd) {\r\n      this.props.reloadHistory();\r\n    } else {\r\n      video.paused ? api.play() : api.pause();\r\n    }\r\n  };\r\n  mutedChange = () => {\r\n    const { api, video } = this.props;\r\n    video.muted ? api.unmute() : api.mute();\r\n  };\r\n  volumechange = () => {\r\n    this.forceUpdate();\r\n  };\r\n  openSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: true\r\n    });\r\n  };\r\n  closeSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: false\r\n    });\r\n  };\r\n  onChangeVolume = volume => {\r\n    const { api, video } = this.props;\r\n    api.setVolume(parseFloat(volume.toFixed(1)));\r\n    if (volume > 0 && video.muted) {\r\n      api.unmute();\r\n    }\r\n  };\r\n  reload = () => {\r\n    if (this.props.isHistory) {\r\n      this.props.reloadHistory();\r\n    } else {\r\n      this.props.api.reload();\r\n    }\r\n    this.props.event.emit(EventName.CLEAR_ERROR_TIMER);\r\n  };\r\n  render() {\r\n    const { openSliderVolume } = this.state;\r\n    const { video, playerProps } = this.props;\r\n    const { isLive, leftExtContents = null, leftMidExtContents = null } = playerProps;\r\n    const volumeType = video.volume === 1 ? \"lm-player-volume-max\" : \"lm-player-volume-normal-fuben\";\r\n    return (\r\n      <div className=\"contraller-left-bar\">\r\n        {leftExtContents}\r\n        <Bar visibel={!isLive}>\r\n          <IconFont\r\n            onClick={this.changePlayStatus}\r\n            type={video.paused ? \"lm-player-Play_Main\" : \"lm-player-Pause_Main\"}\r\n            title={video.paused ? \"播放\" : \"暂停\"}\r\n          />\r\n        </Bar>\r\n        <Bar\r\n          className={`contraller-bar-volume ${openSliderVolume ? \"contraller-bar-hover-volume\" : \"\"}`}\r\n          onMouseOver={this.openSliderVolume}\r\n          onMouseOut={this.closeSliderVolume}\r\n        >\r\n          <IconFont onClick={this.mutedChange} type={video.muted ? \"lm-player-volume-close\" : volumeType} title=\"音量\" />\r\n          <div className=\"volume-slider-layout\">\r\n            <Slider\r\n              className=\"volume-slider\"\r\n              currentPercent={video.muted ? 0 : video.volume * 100}\r\n              onChange={this.onChangeVolume}\r\n              renderTips={precent => <span>{Math.round(precent * 100)}%</span>}\r\n            />\r\n          </div>\r\n        </Bar>\r\n        <Bar>\r\n          <IconFont onClick={this.reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\r\n        </Bar>\r\n        {leftMidExtContents}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftBar;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport Bar from \"./bar\";\r\nimport { isFullscreen, fullScreenListener, computedBound } from \"../util\";\r\n\r\n@videoDec\r\nclass RightBar extends React.Component {\r\n  componentDidMount() {\r\n    fullScreenListener(true, this.update);\r\n  }\r\n  componentWillUnmount() {\r\n    fullScreenListener(false, this.update);\r\n  }\r\n  update = () => {\r\n    this.forceUpdate();\r\n  };\r\n  fullscreen = () => {\r\n    const { api, playContainer } = this.props;\r\n    if (!isFullscreen(playContainer)) {\r\n      api.requestFullScreen();\r\n    } else {\r\n      api.cancelFullScreen();\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n  setScale = (...args) => {\r\n    const { api, playContainer } = this.props;\r\n    const dragDom = playContainer.querySelector(\".player-mask-layout\");\r\n    api.setScale(...args);\r\n    let position = computedBound(dragDom, api.getPosition(), api.getScale());\r\n    position && api.setPosition(position, true);\r\n  };\r\n  snapshot = () => {\r\n    const { api, playerProps } = this.props;\r\n    if (playerProps.snapshot) {\r\n      playerProps.snapshot(api.snapshot());\r\n    }\r\n  };\r\n  render() {\r\n    const { playContainer, playerProps } = this.props;\r\n    const { isScale, snapshot, rightExtContents = null, rightMidExtContents = null } = playerProps;\r\n    const isfull = isFullscreen(playContainer);\r\n\r\n    return (\r\n      <div className=\"contraller-right-bar\">\r\n        {rightMidExtContents}\r\n        {isScale && (\r\n          <>\r\n            <Bar>\r\n              <IconFont title=\"缩小\" onClick={() => this.setScale(-0.2)} type={\"lm-player-ZoomOut_Main\"} />\r\n            </Bar>\r\n            <Bar>\r\n              <IconFont title=\"复位\" onClick={() => this.setScale(1, true)} type={\"lm-player-ZoomDefault_Main\"} />\r\n            </Bar>\r\n            <Bar>\r\n              <IconFont title=\"放大\" onClick={() => this.setScale(0.2)} type={\"lm-player-ZoomIn_Main\"} />\r\n            </Bar>\r\n          </>\r\n        )}\r\n\r\n        {snapshot && (\r\n          <Bar>\r\n            <IconFont title=\"截图\" onClick={this.snapshot} type=\"lm-player-SearchBox\" />\r\n          </Bar>\r\n        )}\r\n        <Bar>\r\n          <IconFont\r\n            title={isfull ? \"窗口\" : \"全屏\"}\r\n            onClick={this.fullscreen}\r\n            type={isfull ? \"lm-player-ExitFull_Main\" : \"lm-player-Full_Main\"}\r\n          />\r\n        </Bar>\r\n        {rightExtContents}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default RightBar;\r\n","import React from \"react\";\r\nimport LeftBar from \"./left_bar\";\r\nimport RightBar from \"./right_bar\";\r\nimport EventName from \"../event/eventName\";\r\nimport {videoDec} from '../context'\r\nimport \"../style/bar.less\";\r\n\r\n@videoDec\r\nclass ContrallerBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={`contraller-bar-layout ${this.state.hideBar ? \"hide-contraller-bar\" : \"\"}`}>\r\n        <LeftBar />\r\n        <RightBar />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContrallerBar;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\n\r\n@videoDec\r\nclass ContrallerEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timer = null;\r\n  }\r\n  componentDidMount() {\r\n    const { playContainer, event } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 5 * 1000);\r\n  }\r\n  componentWillUnmount() {\r\n    const { playContainer } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    clearTimeout(this.timer);\r\n  }\r\n  showContraller = () => {\r\n    const { event } = this.props;\r\n    event.emit(EventName.SHOW_CONTRALLER);\r\n    this.hideContraller();\r\n  };\r\n  hideContraller = () => {\r\n    const { event } = this.props;\r\n    clearTimeout(this.timer);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 3 * 1000);\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default ContrallerEvent;\r\n","import React from \"react\";\r\nimport IconFont from \"./iconfont\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\n\r\nimport \"./style/message.less\";\r\n\r\n@videoDec\r\nclass VideoMessage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n      status: null\r\n    };\r\n    this.mounted = false\r\n    this.message = null;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    this.mounted = true\r\n    event.addEventListener(\"loadstart\", this.openLoading);\r\n    event.addEventListener(\"waiting\", this.openLoading);\r\n    event.addEventListener(\"seeking\", this.openLoading);\r\n    event.addEventListener(\"loadeddata\", this.closeLoading);\r\n    event.addEventListener(\"canplay\", this.closeLoading);\r\n    event.on(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.on(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.on(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.CLEAR_ERROR_TIMER, this.clearReloadMessage);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    this.mounted = false\r\n    event.removeEventListener(\"loadstart\", this.openLoading);\r\n    event.removeEventListener(\"waiting\", this.openLoading);\r\n    event.removeEventListener(\"seeking\", this.openLoading);\r\n    event.removeEventListener(\"loadeddata\", this.closeLoading);\r\n    event.removeEventListener(\"canplay\", this.closeLoading);\r\n    event.off(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.off(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.off(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.CLEAR_ERROR_TIMER, this.clearReloadMessage);\r\n  }\r\n  clearReloadMessage = () => {\r\n    this.message = null\r\n    this.mounted && this.forceUpdate()\r\n  }\r\n  reload = () => {\r\n    this.setState({ status: \"reload\" });\r\n  };\r\n  errorReload = timer => {\r\n    this.message = <div>视频加载错误，正在进行重连第{timer}重连</div>;\r\n    this.mounted && this.setState({ status: \"reload\", loading: true });\r\n  };\r\n  reloadFail = () => {\r\n    this.message = <div>视频错误</div>;\r\n    this.mounted &&  this.setState({ status: \"fail\" });\r\n  };\r\n  reloadSuccess = () => {\r\n    this.message = null;\r\n    this.mounted && this.setState({ status: null });\r\n  };\r\n  openLoading = () => {\r\n    this.mounted && this.setState({ loading: true });\r\n  };\r\n  closeLoading = () => {\r\n    this.mounted && this.setState({ loading: false });\r\n  };\r\n  historyPlayEnd = () => {\r\n    this.message = null;\r\n    this.mounted && this.setState({ status: null, loading: false });\r\n    this.props.api.pause();\r\n  };\r\n  render() {\r\n    const { loading, status } = this.state;\r\n    return (\r\n      <div className={`lm-player-message-mask ${loading || status === \"fail\" ? \"lm-player-mask-loading-animation\" : \"\"}`}>\r\n        <IconFont\r\n          type={status === \"fail\" ? \"lm-player-YesorNo_No_Dark\" : \"lm-player-Loading\"}\r\n          className={`${loading && status !== \"fail\" ? \"lm-player-loading-animation\" : status === \"fail\" ? \"lm-player-loadfail\" : \"\"} lm-player-loading-icon`}\r\n        />\r\n        <span className=\"lm-player-message\">{this.message}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoMessage;\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport IconFont from \"./iconfont\";\r\nimport Slider from \"./slider\";\r\nimport { timeStamp } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nimport \"./style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 0,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n  changePlayTime = percent => {\r\n    const { api } = this.props;\r\n    const currentTime = percent * this.state.duration;\r\n    api.pause();\r\n    this.setState({ currentTime });\r\n    api.seekTo(currentTime);\r\n  };\r\n  seekendPlay = () => {\r\n    const { video, api } = this.props;\r\n    api.play();\r\n  };\r\n  renderTimeLineTips = percent => {\r\n    const currentTime = percent * this.state.duration;\r\n    const time = timeStamp(currentTime);\r\n    return <span>{time}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  render() {\r\n    const { duration, currentTime, buffered, hideBar } = this.state;\r\n    const playPercent = Math.round((currentTime / duration) * 100);\r\n    const bufferedPercent = Math.round((buffered / duration) * 100);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={this.changePlayTime} renderTips={this.renderTimeLineTips} />\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\nimport flvjs from \"flv.lm.js\";\r\nimport * as Hls from \"hls.js\";\r\n\r\n@videoDec\r\nclass ErrorEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.errorTimer = 0;\r\n  }\r\n  componentDidMount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    if (flvPlayer) {\r\n      //捕获flv错误\r\n      flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (hlsPlayer) {\r\n      //捕获hls错误\r\n      hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n    //捕获video错误\r\n    event.addEventListener(\"error\", this.errorHandle, false);\r\n\r\n    //获取video状态清除错误状态\r\n    event.addEventListener(\"canplay\", this.clearError, false);\r\n\r\n    //历史视频切换播放索引时清除错误次数\r\n    event.on(EventName.CHANGE_PLAY_INDEX, this.clearErrorTimer);\r\n\r\n    //历史视频主动清除错误次数\r\n    event.on(EventName.CLEAR_ERROR_TIMER, this.clearErrorTimer);\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.flvPlayer && nextProps.flvPlayer !== this.props.flvPlayer) {\r\n      nextProps.flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (nextProps.hlsPlayer && nextProps.hlsPlayer !== this.props.hlsPlayer) {\r\n      nextProps.hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    event.removeEventListener(\"error\", this.errorHandle, false);\r\n    flvPlayer && flvPlayer.off(flvjs.Events.ERROR, this.errorHandle);\r\n    hlsPlayer && hlsPlayer.off(Hls.Events.ERROR, this.errorHandle);\r\n\r\n    event.off(EventName.CLEAR_ERROR_TIMER, this.clearErrorTimer);\r\n    event.off(EventName.CHANGE_PLAY_INDEX, this.clearErrorTimer);\r\n    clearTimeout(this.reconnectTimer);\r\n  }\r\n\r\n  clearErrorTimer = () => {\r\n    this.errorTimer = 0;\r\n    clearTimeout(this.reconnectTimer);\r\n  };\r\n  /**\r\n   * 清除播放错误状态\r\n   */\r\n  clearError = () => {\r\n    const { event } = this.props;\r\n    if (this.errorTimer > 0) {\r\n      console.warn(\"视频重连成功！\");\r\n      event.emit(EventName.RELOAD_SUCCESS);\r\n      this.clearErrorTimer();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 捕获错误\r\n   */\r\n  errorHandle = (...args) => {\r\n    console.error(...args);\r\n    clearTimeout(this.reconnectTimer);\r\n    const { event, api, isHistory, changePlayIndex, playIndex, playerProps } = this.props;\r\n    const timer = this.errorTimer + 1;\r\n    event.emit(EventName.ERROR, ...args);\r\n    if (timer > playerProps.errorReloadTimer) {\r\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL), api.unload();\r\n    } else {\r\n      this.errorTimer = timer;\r\n      if ((args[1] && args[1].loader) || (args[0].indexOf && args[0].indexOf(\"NetworkError\") > -1)) {\r\n        this.reloadAction(timer, args);\r\n      }\r\n      this.reconnectTimer = setTimeout(() => {\r\n        this.reloadAction(timer, args);\r\n      }, 1000 * 20);\r\n    }\r\n  };\r\n\r\n  reloadAction = (timer, args) => {\r\n    const { event, api } = this.props;\r\n    event.emit(EventName.ERROR_RELOAD, timer, ...args);\r\n    console.warn(`视频播放出错，正在进行重连${timer}`);\r\n    api.reload();\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default ErrorEvent;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport { computedBound } from \"../util\";\r\n\r\n@videoDec\r\nclass DragEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { playContainer } = props;\r\n\r\n    this.dragDom = playContainer.querySelector(\".player-mask-layout\");\r\n    this.position = {\r\n      start: [0, 0],\r\n      end: [0, 0]\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { isDraggable } = this.props.playerProps;\r\n    if (isDraggable) {\r\n      this.dragDom.addEventListener(\"mousedown\", this.openDrag);\r\n      this.props.event.addEventListener(\"transform\", this.transformChange, true);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.dragDom.removeEventListener(\"mousedown\", this.openDrag);\r\n    this.props.event.removeEventListener(\"transform\", this.transformChange);\r\n  }\r\n  openDrag = e => {\r\n    this.position.start = [e.pageX, e.pageY];\r\n    this.dragDom.addEventListener(\"mousemove\", this.moveChange);\r\n    this.dragDom.addEventListener(\"mouseup\", this.stopDrag);\r\n  };\r\n  moveChange = e => {\r\n    const { api } = this.props;\r\n    const currentPosition = api.getPosition();\r\n    this.position.end = [e.pageX, e.pageY];\r\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0]);\r\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1]);\r\n    const position = [x, y];\r\n    api.setPosition(position);\r\n    this.position.start = [e.pageX, e.pageY];\r\n  };\r\n  stopDrag = () => {\r\n    this.dragDom.removeEventListener(\"mousemove\", this.moveChange);\r\n    this.dragDom.removeEventListener(\"mouseup\", this.stopDrag);\r\n    this.transformChange();\r\n  };\r\n  transformChange = () => {\r\n    const { api } = this.props;\r\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale());\r\n    position && api.setPosition(position, true);\r\n  };\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default DragEvent;\r\n","import { fullscreen, isFullscreen, exitFullscreen } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nexport default class Api {\r\n  constructor(video, playContainer, event, flv, hls) {\r\n    this.player = video;\r\n    this.playContainer = playContainer;\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n    this.event = event;\r\n    this.scale = 1;\r\n    this.position = [0, 0];\r\n  }\r\n  /**\r\n   * 播放器销毁后 动态跟新api下的flv，hls对象\r\n   * @param {*} param0\r\n   */\r\n  updateChunk({ flv, hls }) {\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n  }\r\n  /**\r\n   * 全屏\r\n   */\r\n  requestFullScreen() {\r\n    if (!isFullscreen(this.playContainer)) {\r\n      fullscreen(this.playContainer);\r\n    }\r\n  }\r\n  /**\r\n   * 退出全屏\r\n   */\r\n  cancelFullScreen() {\r\n    if (isFullscreen(this.playContainer)) {\r\n      exitFullscreen();\r\n    }\r\n  }\r\n  play() {\r\n    if (this.player.paused) {\r\n      this.player.play();\r\n    }\r\n  }\r\n  pause() {\r\n    if (!this.player.paused) {\r\n      this.player.pause();\r\n    }\r\n  }\r\n  destroy() {\r\n    this.player.removeAttribute(\"src\");\r\n    this.unload();\r\n    if (this.flv) {\r\n      this.flv.destroy();\r\n    }\r\n    if (this.hls) {\r\n      this.hls.destroy();\r\n    }\r\n    this.scale = null;\r\n    this.position = null;\r\n  }\r\n\r\n  /**\r\n   * 设置currentTime实现seek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n  seekTo(seconds, noEmit) {\r\n    const buffered = this.getBufferedTime();\r\n    if (this.flv && buffered[0] > seconds) {\r\n      this.flv.unload();\r\n      this.flv.load();\r\n    }\r\n    this.player.currentTime = seconds;\r\n    if (!noEmit) {\r\n      this.event.emit(EventName.SEEK, seconds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 视频重载\r\n   */\r\n  reload() {\r\n    this.unload();\r\n    this.load();\r\n    this.play();\r\n    this.event.emit(EventName.RELOAD);\r\n    if (this.getCurrentTime !== 0) {\r\n      this.seekTo(0);\r\n    }\r\n  }\r\n  unload() {\r\n    this.flv && this.flv.unload();\r\n    this.hls && this.hls.stopLoad();\r\n  }\r\n  load() {\r\n    this.flv && this.flv.load();\r\n    if (this.hls) {\r\n      this.hls.startLoad();\r\n      this.hls.swapAudioCodec();\r\n      this.hls.recoverMediaError();\r\n    }\r\n  }\r\n  setVolume(fraction) {\r\n    this.player.volume = fraction;\r\n  }\r\n  mute() {\r\n    this.player.muted = true;\r\n  }\r\n  unmute() {\r\n    this.player.muted = false;\r\n  }\r\n\r\n  /**\r\n   * 开启画中画功能\r\n   */\r\n  requestPictureInPicture() {\r\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\r\n      this.player.requestPictureInPicture();\r\n    }\r\n  }\r\n  /**\r\n   * 关闭画中画功能\r\n   */\r\n  exitPictureInPicture() {\r\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\r\n      document.exitPictureInPicture();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置播放速率\r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.player.playbackRate = rate;\r\n  }\r\n  /**\r\n   * 获取视频总时长\r\n   */\r\n  getDuration() {\r\n    if (!this.player) return null;\r\n    const { duration, seekable } = this.player;\r\n    if (duration === Infinity && seekable.length > 0) {\r\n      return seekable.end(seekable.length - 1);\r\n    }\r\n    return duration;\r\n  }\r\n  /**\r\n   * 获取当前播放时间\r\n   */\r\n  getCurrentTime() {\r\n    if (!this.player) return null;\r\n    return this.player.currentTime;\r\n  }\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getSecondsLoaded() {\r\n    return this.getBufferedTime()[1];\r\n  }\r\n\r\n  /**\r\n   * 获取当前视频缓存的起止时间\r\n   */\r\n  getBufferedTime() {\r\n    if (!this.player) return null;\r\n    const { buffered } = this.player;\r\n    if (buffered.length === 0) {\r\n      return [0, 0];\r\n    }\r\n    const end = buffered.end(buffered.length - 1);\r\n    const start = buffered.start(buffered.length - 1);\r\n    const duration = this.getDuration();\r\n    if (end > duration) {\r\n      return duration;\r\n    }\r\n    return [start, end];\r\n  }\r\n  /**\r\n   * 快进通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  fastForward(second = 5) {\r\n    const duration = this.getDuration();\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime + second;\r\n    this.seekTo(time > duration - 1 ? duration - 1 : time);\r\n  }\r\n\r\n  /**\r\n   * 快退通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  backWind(second = 5) {\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime - second;\r\n    this.seekTo(time < 1 ? 1 : time);\r\n  }\r\n\r\n  /**\r\n   * 视频截屏方法\r\n   */\r\n  snapshot() {\r\n    let canvas = document.createElement(\"canvas\");\r\n    let ctx = canvas.getContext(\"2d\");\r\n    canvas.width = this.player.videoWidth;\r\n    canvas.height = this.player.videoHeight;\r\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height);\r\n    setTimeout(() => {\r\n      canvas.remove();\r\n      canvas = null;\r\n      ctx = null;\r\n    }, 200);\r\n    return canvas.toDataURL();\r\n  }\r\n  setScale(num, isRest = false) {\r\n    let scale = this.scale + num;\r\n    if (isRest) {\r\n      scale = num;\r\n    } else {\r\n      if (scale < 1) {\r\n        scale = 1;\r\n      }\r\n      if (scale > 3) {\r\n        scale = 3;\r\n      }\r\n    }\r\n    this.scale = scale;\r\n    this.player.style.transition = \"transform 0.3s\";\r\n    this.__setTransform();\r\n    this.event.emit(EventName.TRANSFORM);\r\n    setTimeout(() => {\r\n      this.player.style.transition = \"unset\";\r\n    }, 500);\r\n  }\r\n  getScale() {\r\n    return this.scale;\r\n  }\r\n  setPosition(position, isAnimate) {\r\n    this.position = position;\r\n    this.player.style.transition = isAnimate ? \"transform 0.3s\" : \"unset\";\r\n    this.__setTransform();\r\n  }\r\n  getPosition() {\r\n    return this.position;\r\n  }\r\n  __setTransform() {\r\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`;\r\n  }\r\n  getApi() {\r\n    return {\r\n      play: this.play.bind(this),\r\n      reload: this.reload.bind(this),\r\n      pause: this.pause.bind(this),\r\n      seekTo: this.seekTo.bind(this),\r\n      setVolume: this.setVolume.bind(this),\r\n      mute: this.mute.bind(this),\r\n      unmute: this.unmute.bind(this),\r\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\r\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\r\n      setPlaybackRate: this.setPlaybackRate.bind(this),\r\n      destroy: this.destroy.bind(this),\r\n      getDuration: this.getDuration.bind(this),\r\n      getCurrentTime: this.getCurrentTime.bind(this),\r\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\r\n      getBufferedTime: this.getBufferedTime.bind(this),\r\n      fastForward: this.fastForward.bind(this),\r\n      backWind: this.backWind.bind(this),\r\n      snapshot: this.snapshot.bind(this),\r\n      requestFullScreen: this.requestFullScreen.bind(this),\r\n      cancelFullScreen: this.cancelFullScreen.bind(this),\r\n      __player: this.player,\r\n      flv: this.flv,\r\n      hls: this.hls\r\n    };\r\n  }\r\n}\r\n","function getHiddenProp() {\r\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n  // 如果hidden 属性是原生支持的，我们就直接返回\r\n  if (\"hidden\" in document) {\r\n    return \"hidden\";\r\n  }\r\n\r\n  // 其他的情况就循环现有的浏览器前缀，拼接我们所需要的属性\r\n  for (let i = 0; i < prefixes.length; i++) {\r\n    // 如果当前的拼接的前缀在 document对象中存在 返回即可\r\n    if (prefixes[i] + \"Hidden\" in document) {\r\n      return prefixes[i] + \"Hidden\";\r\n    }\r\n  }\r\n\r\n  // 其他的情况 直接返回null\r\n  return null;\r\n}\r\n\r\nfunction getVisibilityState() {\r\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n\r\n  if (\"visibilityState\" in document) {\r\n    return \"visibilityState\";\r\n  }\r\n\r\n  for (let i = 0; i < prefixes.length; i++) {\r\n    if (prefixes[i] + \"VisibilityState\" in document) {\r\n      return prefixes[i] + \"VisibilityState\";\r\n    }\r\n  }\r\n  // 找不到返回 null\r\n  return null;\r\n}\r\n\r\nfunction visibilityState() {\r\n  return document[getVisibilityState()];\r\n}\r\n\r\nfunction addEventListener(listener) {\r\n  const visProp = getHiddenProp();\r\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\r\n  document.addEventListener(evtname, listener, false);\r\n}\r\n\r\nfunction removeEventListener(listener) {\r\n  const visProp = getHiddenProp();\r\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\r\n  document.removeEventListener(evtname, listener, false);\r\n}\r\n\r\nexport default {\r\n  addEventListener,\r\n  removeEventListener,\r\n  visibilityState\r\n};\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\nimport BrowserTab from \"./event/browserTabEvent\";\r\n\r\n@videoDec\r\nclass LiveHeart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timer = null;\r\n    this.isCanPlay = false;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    BrowserTab.addEventListener(this.browserTabChange);\r\n    event.addEventListener(\"canplay\", this.canplay);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    BrowserTab.removeEventListener(this.browserTabChange);\r\n    event.removeEventListener(\"canplay\", this.canplay);\r\n  }\r\n\r\n  browserTabChange = () => {\r\n    if (BrowserTab.visibilityState() === \"visible\") {\r\n      this.focusSeekAction();\r\n    }\r\n  };\r\n\r\n  canplay = () => {\r\n    const { api } = this.props;\r\n    this.isCanPlay = true;\r\n    api.play();\r\n  };\r\n\r\n  /**\r\n   * 更新currentTime\r\n   */\r\n  focusSeekAction = () => {\r\n    const { api } = this.props;\r\n    const current = api.getCurrentTime();\r\n    const buffered = api.getSecondsLoaded();\r\n    if (buffered - current > 5) {\r\n      console.warn(\r\n        `当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered -\r\n          2}`\r\n      );\r\n      api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0);\r\n    }\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default LiveHeart;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport VideoEvent from \"./event\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"./util\";\r\nimport { Provider } from \"./context\";\r\nimport ContrallerBar from \"./contraller_bar\";\r\nimport ContrallerEvent from \"./event/contrallerEvent\";\r\nimport VideoMessage from \"./message\";\r\nimport TimeLine from \"./time_line\";\r\nimport ErrorEvent from \"./event/errorEvent\";\r\nimport DragEvent from \"./event/dragEvent\";\r\nimport Api from \"./api\";\r\nimport LiveHeart from \"./live_heart\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./style/index.less\";\r\n\r\nclass LMPlayer extends React.Component {\r\n  static propTypes = {\r\n    file: PropTypes.string.isRequired, //播放地址 必填\r\n    isLive: PropTypes.bool, //是否实时视频\r\n    errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n    type: PropTypes.oneOf([\"flv\", \"hls\", \"native\"]), //强制视频流类型\r\n    onInitPlayer: PropTypes.func,\r\n    isDraggable: PropTypes.bool,\r\n    isScale: PropTypes.bool,\r\n    muted: PropTypes.string,\r\n    autoPlay: PropTypes.bool,\r\n    playsInline: PropTypes.bool,\r\n    preload: PropTypes.string,\r\n    poster: PropTypes.string,\r\n    loop: PropTypes.bool,\r\n    snapshot: PropTypes.func\r\n  };\r\n  static defaultProps = {\r\n    isLive: true,\r\n    isDraggable: true,\r\n    isScale: true,\r\n    errorReloadTimer: 5,\r\n    muted: \"muted\",\r\n    autoPlay: true,\r\n    playsInline: false,\r\n    preload: \"auto\",\r\n    loop: false\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.api = null;\r\n    this.playContainerRef = React.createRef();\r\n    this.playContainer = null;\r\n    this.willReCreatePlayer = false;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    this.initPlayer();\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n    this.forceUpdate();\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n    if (this.props.autoPlay) {\r\n      this.api.play();\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.props.file !== nextProps.file) {\r\n      this.willReCreatePlayer = true;\r\n    }\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.willReCreatePlayer) {\r\n      this.initPlayer();\r\n      this.willReCreatePlayer = false;\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.event.destroy();\r\n    this.player = null;\r\n    this.event = null;\r\n    setTimeout(() => {\r\n      this.api.destroy();\r\n      this.flv = null;\r\n      this.hls = null;\r\n      this.api = null;\r\n    }, 200);\r\n    this.playContainerRef = null;\r\n    this.playContainer = null;\r\n    this.willReCreatePlayer = null;\r\n  }\r\n\r\n  initPlayer = () => {\r\n    if (!this.props.file) {\r\n      return null;\r\n    }\r\n    const type = getVideoType(this.props.file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, this.props);\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, this.props.file);\r\n    } else {\r\n      this.player.src = this.props.file;\r\n    }\r\n  };\r\n\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        <DragEvent />\r\n        <ContrallerEvent />\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        {this.props.isLive ? <LiveHeart key={this.props.file} /> : <TimeLine />}\r\n      </>\r\n    );\r\n  };\r\n  getPlayUrl = () => {\r\n    return this.props.file;\r\n  };\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n    return Object.assign({}, api, event, { getPlayUrl: this.getPlayUrl, playContainer: this.playContainer });\r\n  };\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer\r\n    };\r\n  };\r\n  render() {\r\n    const { autoplay, poster, preload = \"none\", muted = \"muted\", loop = false, playsinline = false } = this.props;\r\n    const providerValue = this.getProvider();\r\n    return (\r\n      <div className=\"lm-player-container\" ref={this.playContainerRef}>\r\n        <div className=\"player-mask-layout\">\r\n          <video autoPlay={autoplay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\r\n        </div>\r\n        <Provider value={providerValue}>{this.renderVideoTools()}</Provider>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LMPlayer;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport Slider from \"../slider\";\r\nimport { dateFormat } from \"../util\";\r\nimport EventName from \"../event/eventName\";\r\nimport \"../style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 1,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      isEnd: false,\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  /**\r\n   * reload事件触发时 清除结束状态\r\n   */\r\n  reload = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      isEnd: false,\r\n      currentTime: api.getCurrentTime()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 设置播放结束状态，用于修正current圆点位置\r\n   */\r\n  historyPlayEnd = () => {\r\n    this.setState({\r\n      isEnd: true\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 更新播放时长\r\n   */\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 获取播放时间\r\n   */\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 切换播放进度\r\n   */\r\n  changePlayTime = percent => {\r\n    const { seekTo, historyList } = this.props;\r\n    const currentTime = percent * historyList.duration;\r\n    const playIndex = historyList.fragments.findIndex(v => v.end > currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    if (fragment.file) {\r\n      seekTo(currentTime);\r\n      this.setState({ currentTime, isEnd: false });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 切换完成自动播放\r\n   */\r\n  seekendPlay = () => {\r\n    const { api } = this.props;\r\n    api.play();\r\n  };\r\n\r\n  /**\r\n   * 时间轴提示\r\n   */\r\n  renderTimeLineTips = percent => {\r\n    const { historyList } = this.props;\r\n    const currentTime = percent * historyList.duration * 1000;\r\n    const date = dateFormat(historyList.beginDate + currentTime);\r\n    return <span>{date}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  computedLineList = historyList => {\r\n    const duration = historyList.duration;\r\n    return historyList.fragments.map(v => {\r\n      return {\r\n        disabled: !v.file,\r\n        size: ((v.end - v.begin) / duration) * 100\r\n      };\r\n    });\r\n  };\r\n  render() {\r\n    const { historyList, playIndex } = this.props;\r\n    const { currentTime, buffered, isEnd, hideBar } = this.state;\r\n    const lineList = this.computedLineList(historyList);\r\n    const currentLine = lineList.filter((v, i) => i < playIndex).map(v => v.size);\r\n    const currentIndexTime =\r\n      currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0];\r\n    const playPercent = Math.round((currentTime / historyList.duration) * 100 + currentIndexTime);\r\n    const bufferedPercent = Math.round((buffered / historyList.duration) * 100 + currentIndexTime);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider\r\n          className=\"time-line-box\"\r\n          currentPercent={isEnd ? \"100\" : playPercent}\r\n          availablePercent={bufferedPercent}\r\n          onChange={this.changePlayTime}\r\n          renderTimeLineTips={this.renderTimeLineTips}\r\n        >\r\n          <>\r\n            {lineList.map((v, i) => {\r\n              const currentSizeLine = lineList.filter((v, i2) => i2 < i).map(v => v.size);\r\n              const currentIndexSize =\r\n                currentSizeLine.length === 0\r\n                  ? 0\r\n                  : currentSizeLine.length > 1\r\n                  ? currentSizeLine.reduce((p, c) => p + c)\r\n                  : currentSizeLine[0];\r\n              return (\r\n                <div\r\n                  className={`history-time-line-item ${v.disabled ? \"history-time-line-disabled\" : \"\"}`}\r\n                  key={i}\r\n                  style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }}\r\n                />\r\n              );\r\n            })}\r\n          </>\r\n        </Slider>\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","/**\r\n * history下使用 用户切换下个播放地址\r\n */\r\n\r\nimport React from \"react\";\r\nimport { videoDec } from \"../context\";\r\n\r\n@videoDec\r\nclass PlayEnd extends React.Component {\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  endedHandle = () => {\r\n    let index = this.props.playIndex\r\n    this.props.changePlayIndex(index + 1)\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default PlayEnd;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Provider } from \"../context\";\r\nimport ContrallerBar from \"../contraller_bar\";\r\nimport VideoMessage from \"../message\";\r\nimport HistoryTimeLine from \"./time_line_history\";\r\nimport ErrorEvent from \"../event/errorEvent\";\r\nimport DragEvent from \"../event/dragEvent\";\r\nimport Api from \"../api\";\r\nimport VideoEvent from \"../event\";\r\nimport PlayEnd from \"./play_end\";\r\nimport EventName from \"../event/eventName\";\r\nimport ContrallerEvent from \"../event/contrallerEvent\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"../util\";\r\n\r\nclass HistoryPlayer extends React.Component {\r\n  static propTypes = {\r\n    historyList: PropTypes.object.isRequired, //播放地址 必填\r\n    isLive: PropTypes.bool, //是否实时视频\r\n    errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n    type: PropTypes.oneOf([\"flv\", \"hls\", \"native\"]), //强制视频流类型\r\n    onInitPlayer: PropTypes.func,\r\n    isDraggable: PropTypes.bool,\r\n    isScale: PropTypes.bool,\r\n    muted: PropTypes.string,\r\n    autoPlay: PropTypes.bool,\r\n    playsInline: PropTypes.bool,\r\n    preload: PropTypes.string,\r\n    poster: PropTypes.string,\r\n    loop: PropTypes.bool,\r\n    defaultTime: PropTypes.number\r\n  };\r\n  static defaultProps = {\r\n    isLive: true,\r\n    isDraggable: true,\r\n    isScale: true,\r\n    errorReloadTimer: 5,\r\n    muted: \"muted\",\r\n    autoPlay: true,\r\n    playsInline: false,\r\n    preload: \"auto\",\r\n    loop: false,\r\n    defaultTime: 0\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.playIndex = 0;\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playContainerRef = React.createRef();\r\n    this.playContainer = null;\r\n    this.willReCreatePlayer = false;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    if (this.props.defaultTime) {\r\n      this.seekTo(defaultTime);\r\n    } else {\r\n      this.changePlayIndex(this.playIndex);\r\n    }\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n    if (this.props.autoPlay) {\r\n      this.api.play();\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.props.historyList !== nextProps.historyList) {\r\n      this.willReCreatePlayer = true;\r\n    }\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.willReCreatePlayer) {\r\n      this.playIndex = 0;\r\n      this.changePlayIndex(this.playIndex);\r\n      this.willReCreatePlayer = false;\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.event.destroy();\r\n    this.player = null;\r\n    this.event = null;\r\n    setTimeout(() => {\r\n      this.api.destroy();\r\n      this.flv = null;\r\n      this.hls = null;\r\n      this.api = null;\r\n    }, 200);\r\n    this.playContainerRef = null;\r\n    this.playContainer = null;\r\n    this.willReCreatePlayer = null;\r\n  }\r\n  initPlayer = index => {\r\n    const { historyList } = this.props;\r\n    if (!historyList || !historyList.fragments[index] || !historyList.fragments[index].file) {\r\n      return null;\r\n    }\r\n    if (this.flv) {\r\n      this.flv.unload();\r\n      this.flv.destroy();\r\n      this.flv = null;\r\n    }\r\n    if (this.hls) {\r\n      this.hls.stopLoad();\r\n      this.hls.destroy();\r\n      this.hls = null;\r\n    }\r\n    const type = getVideoType(historyList.fragments[index].file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, { file: historyList.fragments[index].file });\r\n      this.api && this.api.updateChunk({ flv: this.flv });\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, historyList.fragments[index].file);\r\n      this.api && this.api.updateChunk({ hls: this.hls });\r\n    } else {\r\n      this.player.src = historyList.fragments[index].file;\r\n    }\r\n    this.playIndex = index;\r\n    this.forceUpdate();\r\n  };\r\n  /**\r\n   * @历史视频\r\n   * @专用修改历史视频播放的索引\r\n   */\r\n  changePlayIndex = index => {\r\n    const { historyList } = this.props;\r\n    if (!historyList.fragments[index]) {\r\n      this.event && this.event.emit(EventName.HISTORY_PLAY_END);\r\n      return;\r\n    }\r\n    if (!historyList.fragments[index].file) {\r\n      this.changePlayIndex(index + 1);\r\n    } else {\r\n      this.initPlayer(index);\r\n    }\r\n    this.api && this.api.play();\r\n    this.event && this.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n  };\r\n\r\n  /**\r\n   * 覆盖Player中暴漏的api，重写seek相关的方法\r\n   */\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n\r\n    const historyApi = {\r\n      seekTo: this.seekTo\r\n    };\r\n    return Object.assign({}, api, event, historyApi);\r\n  };\r\n\r\n  /**\r\n   * 根据时间计算当前对应的播放索引\r\n   */\r\n  computedIndexFormTime = time => {\r\n    const { historyList } = this.props;\r\n    return historyList.fragments.findIndex(v => v.end > time);\r\n  };\r\n\r\n  /**\r\n   * 重写api下的seekTo方法\r\n   */\r\n  seekTo = currentTime => {\r\n    const playIndex = this.computedIndexFormTime(currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    const seekTime = currentTime - fragment.begin - 1;\r\n    this.api.pause();\r\n    if (playIndex !== this.playIndex) {\r\n      this.changePlayIndex(playIndex);\r\n    }\r\n    this.api.seekTo(seekTime, true);\r\n    this.event.emit(EventName.SEEK, currentTime);\r\n  };\r\n\r\n  /**\r\n   * 重写reload方法\r\n   */\r\n  reloadHistory = () => {\r\n    this.changePlayIndex(0);\r\n    this.api.seekTo(0);\r\n    this.event.emit(EventName.RELOAD);\r\n    this.api.play();\r\n  };\r\n  /**\r\n   * 覆盖Player中的context的value，新增一些历史视频专用的方法\r\n   */\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer,\r\n      changePlayIndex: this.changePlayIndex,\r\n      playIndex: this.playIndex,\r\n      historyList: this.props.historyList,\r\n      seekTo: this.seekTo,\r\n      isHistory: true,\r\n      reloadHistory: this.reloadHistory\r\n    };\r\n  };\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        <HistoryTimeLine />\r\n        <ContrallerEvent />\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        <DragEvent />\r\n        <PlayEnd />\r\n      </>\r\n    );\r\n  };\r\n  render() {\r\n    const { autoplay, poster, preload, muted = \"muted\", loop = false, playsinline = false } = this.props;\r\n    const providerValue = this.getProvider();\r\n    return (\r\n      <div className=\"lm-player-container\" ref={this.playContainerRef}>\r\n        <div className=\"player-mask-layout\">\r\n          <video\r\n            autoPlay={autoplay}\r\n            preload={preload}\r\n            muted={muted}\r\n            poster={poster}\r\n            controls={false}\r\n            playsInline={playsinline}\r\n            loop={loop}\r\n          />\r\n        </div>\r\n        <Provider value={providerValue}>{this.renderVideoTools()}</Provider>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HistoryPlayer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\n\r\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <Player\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </Player>,\r\n    container\r\n  );\r\n}\r\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <HistoryPlayer\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </HistoryPlayer>,\r\n    container\r\n  );\r\n}\r\n","import Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\nimport Bar from \"./contraller_bar/bar\";\r\nimport { createHistoryPlayer, createPlayer } from \"./createPlayer\";\r\n\r\nexport { Player as default, Player, HistoryPlayer, createHistoryPlayer, createPlayer, Bar };\r\n"],"sourceRoot":""}